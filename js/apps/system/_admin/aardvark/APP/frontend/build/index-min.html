<!DOCTYPE html><html lang="en" xmlns="http://www.w3.org/1999/html"><head><meta charset="utf-8"><title>AvocadoDB 中文的多功能数据库</title><meta name="description" content="AvocadoDB Admin Web Interface"><meta name="author" content="Heiko Kernbach, Michael Hackstein"><meta name="viewport" content="width=device-width,initial-scale=1"><link href="css/style.css" rel="stylesheet"><link href="css/sass.css" rel="stylesheet"><link rel="shortcut icon" type="image/x-icon" href="favicon.ico"><script src="config.js"></script><script id="applicationDetailView.ejs" type="text/template"><div class="application-detail-view">
    <div class="headerBar" style="width: 100%">

      <ul class="subMenuEntries subViewNavbar pull-left">
        <li id="service-info" class="subMenuEntry active"><a>信息</a></li>
        <li id="service-api" class="subMenuEntry "><a>接口</a></li>
        <li id="service-readme" class="subMenuEntry "><a>文档</a></li>
        <li id="service-settings" class="subMenuEntry "><a>设置</a></li>
      </ul>

      <div class="headerButtonBar" style="display: none">
        <ul class="headerButtonList">
          <li>
            <a id="app-deps" class="headerButton <%= _.isEmpty(app.get('deps')) ? 'disabled' : '' %> <%= app.hasUnconfiguredDependencies() ? 'error' : '' %>">
              <span class="fa fa-cubes" title="依赖"></span>
            </a>
          </li>
          <li id="app-scripts" class="dropdown">
            <a class="headerButton <%= _.isEmpty(app.get('scripts')) ? 'disabled' : '' %>" title="脚本">
              <i class="fa fa-code"></i>
            </a>
            <ul class="script-dropdown-menu dropdown-toolbar dropdown-menu" id="scripts_dropdown"> <% _.each(app.get('scripts'), function (title, name) { %> <li class="dropdown-item">
                <a class="tab" data-script="<%= name %>"><%= title %></a>
              </li> <% }) %> </ul>
          </li>
          <li>
            <a id="app-tests" class="headerButton">
              <span class="fa fa-flask" title="测试"></span>
            </a>
          </li>
          <li>
            <a id="download-app" class="headerButton <%= app.isSystem() ? 'disabled' : '' %>">
              <span class="fa fa-download" title="下载"></span>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <section class="info" id="information">
      <div class="header">
        <div class="header-icon-container">
          <img src="<%= app.thumbnailUrl %>" alt="Icon for Service" class="icon" />
        </div>
        <div id="hidden_buttons" style="display: none">
          <button class="delete button-danger" <%=app.isSystem()?"disabled":""%> >删除</button>
          <button id="app-replace" class="app-replace upgrade button-warning" <%=app.isSystem()?"disabled":"" %>>替换</button>
          <button id="app-switch-mode" class="app-switch-mode switch-mode button-warning"><%=app.get('development')?'Set Production':'Set Development'%></button>
        </div>
        <div class="header_left">
          <div id="app-warning" class="app-warning" style="display:<%=app.needsAttention()?'block':'none' %>;">
            <h4>不按顺序</h4>
            <p id="app-warning-broken" style="display:<%=app.isBroken()?'block':'none' %>;">由于错误, 此服务无法装载.</p>
            <p id="app-warning-config" style="display:<%=app.needsConfiguration()?'block':'none' %>;">此服务尚未正确配置.</p>
            <p id="app-warning-deps" style="display:<%=app.hasUnconfiguredDependencies()?'block':'block' %>;">尚未设置某些依赖项.</p>
          </div>
          <div class="header_line">
            <h3> <%= app.attributes.name %> </h3>
          </div>
          <div class="header_line header_line_bottom">
            <p class="description"><%= app.attributes.description %></p>
            <div>
              <div class="inner">
                <h3> <% if (app.attributes.license) { %> <span class="license"><%= app.attributes.license %></span> <% } %> </h3>
                <h3>
                  <span class="version"><%= app.attributes.version %></span>
                </h3>
                <h3>
                  <span class="mode <%=app.get('development')?'development':'production'%>"><%=app.get('development')?'Development':'Production'%></span>
                </h3>
              </div>
            </div>
          </div>
        </div>
        <div class="header_right">
          <input type="button" class="open button-success" disabled="true" value="显示界面" />
        </div>
        <div class="information">
        </div>
      </div>
    </section>
    <main>
      <div id="app-info" class="app-info" style="display: none;">
        <h4>信息</h4>
        <p id="app-info-swagger">尚未配置此服务的文档。</p>
      </div>
      <div id="swagger" class="swagger" style="display: none;">
        <a id="jsonLink">Swagger</a>
        <div id="swaggerJsonContent" style="display: none">
          <div id="swaggerJsonEditor" style="height: 100%;"></div>
        </div>
        <iframe src="<%= baseUrl %>/_admin/aardvark/foxxes/docs/index.html?mount=<%= encodeURIComponent(app.get('mount')) %>" name="Documentation"></iframe>
      </div>
      <div id="settings" class="readme" style="display: none;"> <% if (_.isEmpty(app.get('config'))) { %> <p>没有可用的可配置设置.</p> <% } %> <div class="buttons"></div>
      </div>
      <div id="readme" class="readme" style="display: none;"> <% if (app.get('readme')) { %> <%= app.get('readme') %> <% } else { %> <p>没有找到readme数据.</p> <% } %> </div>
    </main>
    <!--<aside class="meta" id="sideinformation">
      <dl>
        <dt>Author</dt>
        <dd><%= app.attributes.author %></dd>
        <dt>Contributors</dt>
        <dd> <% if (app.attributes.contributors && app.attributes.contributors.length > 0) { %> <ul> <% _.each(app.attributes.contributors, function (contributor) { %> <li><a href="mailto:<%= contributor.email %>"><%= contributor.name %></a></li> <% }); %> </ul> <% } else { %> No contributors <% } %> </dd>
        <dt>Links</dt>
        <dd>
          <ul>
            <li>
              <a href="<%= baseUrl %>/_admin/aardvark/foxxes/docs/standalone/index.html?mount=<%= encodeURIComponent(app.get('mount')) %>" target="_blank">
                API Documentation
              </a>
            </li>
            <li>
              <a href="<%= baseUrl %>/_admin/aardvark/foxxes/docs/swagger.json?mount=<%= encodeURIComponent(app.get('mount')) %>" target="_blank">
                API as JSON
              </a>
            </li> <% if (app.attributes.repository && app.attributes.repository.type == 'git') { %> <li><a href="<%= app.attributes.repository.url %>" target="_blank">Git Repository</a></li> <% } %> </ul>
        </dd>
      </dl>
    </aside>-->
  </div></script><script id="applicationListView.ejs" type="text/template"><tr class="foxx-store-row">
    <td class="foxx-store-main">
      <div class="foxx-name"><%=name%><%=legacy?' (legacy)':''%></div>
      <div class="foxx-author"><%=author%></div>
      <div class="foxx-description"><%=description%></div>
    </td>
    <td class="foxx-store-version">
      <div class="foxx-version"><%=latestVersion%></div>
    </td>
    <td class="foxx-store-install">
      <button class="button-success install-app" appId="<%=name %>" appVersion="<%=latestVersion %>">安装</button>
    </td>
  </tr></script><script id="applicationsView.ejs" type="text/template"><div class="headerBar">
  <div class="headerButtonBar">
    <ul class="headerButtonList">
      <li>
        <a id="foxxToggle" class="headerButton">
          <span class="icon_avocadodb_settings2" title="设置"></span>
        </a>
      </li>
    </ul>
  </div>
</div>

<div id="foxxDropdownOut" class="headerDropdown">
  <div id="foxxDropdown" class="dropdownInner">
    <ul>
      <li class="nav-header">类型</li>
      <li><a href="#services">
        <label class="checkbox checkboxLabel">
          <input class="css-checkbox" type="checkbox" id="checkProduction"/>
          <i class="fa"></i>
          生产
        </label>
      </a></li>

      <li><a href="#services">
        <label class="checkbox checkboxLabel">
          <input class="css-checkbox" type="checkbox" id="checkDevel"/>
          <i class="fa"></i>
          开发
        </label>
      </a></li>

      <li><a href="#services">
        <label class="checkbox checkboxLabel">
          <input class="css-checkbox" id="checkSystem" type="checkbox"/>
          <i class="fa"></i>
          系统运行
        </label>
      </a></li>
    </ul>
  </div>
</div>

<div class="contentDiv">
  <div id="installed">
    <div id="installedList" class="tileList pure-u">
      <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">
        <div class="fullBorderBox">
          <a href="#" id="addApp" class="add"><span class="pull-left add-Icon"><i class="fa fa-plus-circle"></i>
</span> 添加服务</a>
        </div>
      </div>
    </div>
  </div>
</div></script><script id="avocadoTabbar.ejs" type="text/template"><div class="avocado-tabbar" id="<%=content.id%>"> <% _.each(content.titles, function(k,v) { %> <% var name = content.titles[v][0];  %> <% var elid = content.titles[v][1];  %> <button class="avocadodb-tabbar" id="<%=elid%>"><%=name%></button> <%});%> </div></script><script id="avocadoTable.ejs" type="text/template"><div class="tableWrapper"> <% var type = type; %> <table class="avocado-table" id="<%=content.id%>">
      <thead>
        <tr> <% var hcounter = 0; %> <% _.each(content.titles, function(y) {%> <th class="avocado-table-th table-cell<%=hcounter%>"><%=y%></th> <% hcounter++; });%> </tr>
      </thead>
      <tbody> <% _.each(content.rows, function(k) { var counter=0;%> <tr> <% _.each(k, function(x) { %> <% if (type && type[counter] === 'pre') { %> <td class="avocado-table-td table-cell<%=counter%>">
                  <pre class="tablePre"> <%=(content.unescaped && content.unescaped[counter] ? x : _.escape(x))%> </pre>
                </td> <% } else { %> <td class="avocado-table-td table-cell<%=counter%>"><%=(content.unescaped && content.unescaped[counter] ? x : _.escape(x))%></td> <% } %> <% counter++;});%> </tr> <%});%> <% if (content.rows.length === 0) { %> <tr> <% var xcounter = 0; %> <% _.each(content.titles, function(y) {%> <% if (xcounter === 0) { %> <td>No content.</td> <% } else { %> <td></td> <% } %> <% xcounter++; });%> </tr> <% }; %> </tbody>
    </table>
  </div></script><script id="clusterView.ejs" type="text/template"><div class="headerBar" style="margin-top: -60px">
    <div class="headerButtonBar">
      <ul class="headerButtonList">
      </ul>
    </div>
  </div>

  <div id="clusterContent" class="innerContent">

    <div class="pure-g cluster-values">

      <div class="pure-u-1-2 pure-u-md-1-4">
        <div class="valueWrapper">
          <div id="clusterCoordinators" class="value"><i class="fa fa-spin fa-circle-o-notch" style="color: rgba(0, 0, 0, 0.64);"></i></div>
          <div class="graphLabel">调度</div>
        </div>
      </div>

      <div class="pure-u-1-2 pure-u-md-1-4">
        <div class="valueWrapper">
          <div id="clusterDBServers" class="value"><i class="fa fa-spin fa-circle-o-notch" style="color: rgba(0, 0, 0, 0.64);"></i></div>
          <div class="graphLabel">DB服务</div>
        </div>
      </div>

      <div class="pure-u-1-2 pure-u-md-1-4">
        <div class="valueWrapper">
          <div id="clusterRam" class="value"><i class="fa fa-spin fa-circle-o-notch" style="color: rgba(0, 0, 0, 0.64);"></i></div>
          <div class="graphLabel">内存</div>
        </div>
      </div>

      <div class="pure-u-1-2 pure-u-md-1-4">
        <div class="valueWrapper">
          <div id="clusterConnections" class="value"><i class="fa fa-spin fa-circle-o-notch" style="color: rgba(0, 0, 0, 0.64);"></i></div>
          <div class="graphLabel">数据表</div>
        </div>
      </div>

    </div>


    <div class="pure-g cluster-graphs">

      <div class="pure-u-1-1 pure-u-md-24-24 pure-u-lg-12-24">
        <div class="graphWrapper">
          <div id='clusterData'></div>
          <div class="graphLabel">数据</div>
        </div>
      </div>

      <div class="pure-u-1-1 pure-u-md-12-24 pure-u-lg-6-24">
        <div class="graphWrapper">
          <div id='clusterHttp'></div>
          <div class="graphLabel">HTTP</div>
        </div>
      </div>

      <div class="pure-u-1-1 pure-u-md-12-24 pure-u-lg-6-24">
        <div class="graphWrapper">
          <div id='clusterAverage'></div>
          <div class="graphLabel">AVG Request Time</div>
        </div>
      </div>

    </div>

  </div></script><script id="collectionsItemView.ejs" type="text/template"><div class="paddingBox">
  <div class="borderBox"></div>
  <i class="collection-type-icon fa <%= model.get('picture') %>"></i>
  <div class="tileBadge">
    <span> <% if(model.get('desc')) { %> <div class="corneredBadge inProgress"> <%= model.get('desc') %> </div> <% } else if (model.get('status') === 'corrupted') { %> <div class="corneredBadge <%= model.get('status') %>"> <%= model.get('status') %> </div> <% } else if (model.get('status') === "loaded" || model.get('status') === 'unloaded' || model.get('status') === 'loading' || model.get('status') === 'unloading') { %> <% if (!model.get('locked') && model.get("status") !== "loading" && model.get("status") !== "unloading") { %> <div class="corneredBadge <%= model.get('status') %>"> <%= model.get('status') %> </div> <% } else if (model.get('status') === 'loading' || model.get('status') === 'unloading') { %> <div class="corneredBadge inProgress"> <%= model.get('status') %> </div> <% } else { %> <div class="corneredBadge inProgress"> <%= model.get('status') %> </div> <% } %> <% } %> </span>
  </div> <% if(model.get('lockType') === "index") { %> <!-- <progress max="100" value="80"></progress>-->
    <h5 class="collectionName"><%= model.get('name') %></h5> <% } else { %> <h5 class="collectionName"><%= model.get('name') %></h5> <% } %> </div></script><script id="collectionsView.ejs" type="text/template"><div class="headerBar">
    <div class="search-field">
      <input type="text" id="searchInput" class="search-input" placeholder="搜索..."/>
      <!-- <img id="searchSubmit" class="search-submit-icon"/> -->
      <i id="searchSubmit" class="fa fa-search"></i>
    </div>
    <div class="headerButtonBar">
      <ul class="headerButtonList">
        <li class="enabled">
          <a id="collectionsToggle" class="headerButton">
            <span class="icon_avocadodb_settings2" title="设置"></span>
          </a>
        </li>
      </ul>
    </div>

  </div>


  <div id="collectionsDropdown2" class="headerDropdown">

    <div id="collectionsDropdown" class="dropdownInner">

      <ul>
        <li class="nav-header">类型</li>
        <li><a>
          <label class="checkbox checkboxLabel">
            <input class="css-checkbox checkSystemCollections" type="checkbox">
            <i class="fa"></i>
            系统
          </label>
        </a></li>

        <li><a>
          <label class="checkbox checkboxLabel">
            <input class="css-checkbox" type="checkbox" id="checkDocument">
            <i class="fa"></i>
            通用数据表
          </label>
        </a></li>

        <li><a>
          <label class="checkbox checkboxLabel">
            <input class="css-checkbox" type="checkbox" id="checkEdge">
            <i class="fa"></i>
            图形数据表
          </label>
        </a></li>

        </li>
      </ul>

      <ul>
        <li class="nav-header">状态</li>

        <li><a href="#">
          <label class="checkbox checkboxLabel">
            <input class="css-checkbox" type="checkbox" id="checkLoaded">
            <i class="fa"></i>
            载入
          </label>
        </a></li>

        <li><a href="#">
          <label class="checkbox checkboxLabel">
            <input class="css-checkbox" type="checkbox" id="checkUnloaded">
            <i class="fa"></i>
            卸载
          </label>
        </a></li>

      </ul>
      <ul>
        <li class="nav-header">排序</li>

        <li><a href="#">
          <label class="checkbox checkboxLabel">
            <input class="css-checkbox" type="checkbox" id="sortName">
            <i class="fa css-round-label"></i>
            按名称排序
          </label>
        </a></li>

        <li><a href="#">
          <label class="checkbox checkboxLabel">
            <input class="css-checkbox" type="checkbox" id="sortType">
            <i class="fa css-round-label"></i>
            按类型排序
          </label>
        </a></li>

        <li><a href="#">
          <label class="checkbox checkboxLabel">
            <input class="css-checkbox" type="checkbox" id="sortOrder">
            <i class="fa"></i>
            降序排序
          </label>
        </a></li>
      </ul>
    </div>

  </div>

  <div class="contentDiv" id="avocadoCollectionsContainer">
      <div id="collectionsThumbnailsIn" class="tileList pure-g">
        <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">
          <div class="fullBorderBox">
            <a id="createCollection" class="add"><span id="newCollection" class="pull-left add-Icon"><i class="fa fa-plus-circle"></i>
</span> 新建数据表</a>
          </div>
        </div>
      </div>
  </div></script><script id="dashboardView.ejs" type="text/template"> <% var subBar = function(title) { %> <div class="dashboard-sub-bar">
      <div  class="dashboard-sub-bar-title"><%= title %></div>
    </div> <% }
  var enlargeButton = function(name, arrows) {
    if (arrows) { %> <div class="dashboard-sub-bar-menu">
        <i class="fa fa-arrows-alt dashboard-sub-bar-menu-sign" id="<%= name %>Button"></i>
      </div> <% }
  } %> <% var largeChart = function(name, title, arrows) { %> <div class="dashboard-large-chart pure-u-1-1 pure-u-sm-1-1 pure-u-md-2-3"> <% enlargeButton(name, true); %> <div class="dashboard-large-chart-inner dashboard-chart" id="<%= name %>Container">
        <div class="dashboard-legend">
          <div class="dashboard-legend-inner" id="<%= name %>Legend"></div>
        </div>
        <div id="<%= name %>" class="dashboard-interior-chart"></div>
      </div> <% subBar(title) %> </div> <% } %> <% var mediumChart = function(name, title, arrows) { %> <div class="dashboard-medium-chart-outer pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-2">
      <div class="dashboard-medium-chart"> <% enlargeButton(name, true); %> <div class="dashboard-legend">
            <div class="dashboard-legend-inner" id="<%= name %>Legend"></div>
          </div>
        <div class="dashboard-medium-chart-inner dashboard-chart" id="<%= name %>Container">
          <div id="<%= name %>" class="dashboard-interior-chart"></div>
        </div> <% subBar(title) %> </div>
    </div> <% } %> <% var smallChart = function(name, title, arrows) { %> <div class="dashboard-small-chart pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-3"> <% enlargeButton(name, arrows); %> <div class="dashboard-small-chart-inner dashboard-chart" id="<%= name %>Container">
        <div id="<%= name %>" class="dashboard-interior-chart">
          <svg></svg>
        </div>
      </div> <% subBar(title) %> </div> <% } %> <% var tendency = function(title, name, arrows) { %> <div class="dashboard-tendency-container pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-3">
      <div class="dashboard-tendency-chart"> <% enlargeButton(name, arrows); %> <div class="dashboard-tendency"> <% if (name === "asyncRequests") {%> <div class="dashboard-subtitle-bar">sync</div>
            <div class="dashboard-figure">
              <span id="syncPerSecondCurrent"></span> <%} else {%> <div class="dashboard-subtitle-bar">current</div>
            <div class="dashboard-figure">
              <span id="<%= name %>Current"></span> <% } %> </div>
        </div>
        <div class="dashboard-tendency"> <% if (name === "asyncRequests") {%> <div class="dashboard-subtitle-bar">异步</div>
            <div class="dashboard-figure">
              <span id="asyncPerSecondCurrent"></span> <%} else {%> <div class="dashboard-subtitle-bar">每15秒</div>
            <div class="dashboard-figure">
              <span id="<%= name %>Average"></span> <% } %> </div>
        </div>
      </div>
      <div class="dashboard-sub-bar"><%= title %></div>
    </div> <% } %> <ul class="subMenuEntries subViewNavbar">
    <li id="requests-statistics" class="subMenuEntry active"><a>请求统计</a></li>
    <li id="system-statistics" class="subMenuEntry "><a>系统资源</a></li>
    <li id="replication-statistics" class="subMenuEntry "><a>复制</a></li>
  </ul>

  <div id="requests">
    <div class="contentDiv">
      <div class="dashboard-row pure-u cluster-values" id="node-info" style="width: 100%; margin-top: 0; padding-right: 2px; box-sizing: border-box;">
      </div> <% if (hideStatistics !== true) { %> <div class="dashboard-row pure-u"> <% largeChart("requestsChart", "Requests per Second") %> <% tendency("Request Types", "asyncRequests", false); %> <% tendency("Number of Client Connections", "clientConnections", false); %> </div>

        <div class="dashboard-row pure-u small-label-padding"> <% largeChart("dataTransferChart", "Transfer Size per Second") %> <% smallChart("dataTransferDistribution", "Transfer Size per Second (distribution)", false) %> </div>

        <div class="dashboard-row pure-u small-label-padding"> <% largeChart("totalTimeChart", "Average Request Time (seconds)") %> <% smallChart("totalTimeDistribution", "Average Request Time (distribution)", false) %> </div>
      </div> <% } %> </div>

  <div id="system" class="tendency-box-sizing" style="display: none";>

    <div class="dashboard-row pure-u" style="width: 100%;"> <% tendency("Number of threads", "numberOfThreads", false); %> <div class="dashboard-bar-chart-container pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-3">
        <div class="dashboard-bar-chart">
          <div class="dashboard-bar-chart-title">
            <div class="percentage"></div>
            <div class="absolut"></div>
          </div>
          <div class="dashboard-bar-chart-chart" id="residentSizeChartContainer">
            <div id="residentSizeChart">
              <svg></svg>
            </div>
          </div>
        </div>
        <div class="dashboard-sub-bar"">Memory</div>
      </div> <% tendency("Virtual Size in GB", "virtualSize", false); %> </div>
    <div class="dashboard-row pure-u" style="width: 100%"> <% mediumChart("pageFaultsChart", "Major Page Faults") %> <% mediumChart("systemUserTimeChart", "Used CPU Time per Second") %> </div>

  </div>

  <div id="replication" style="display: none;">

    <div class="dashboard-row">
      <div class="dashboard-full-width-chart" id="replication-chart">
        <div class="dashboard-full-width-chart-inner pure-u">
    <div class="dashboard-sub-bar"">Replication <span class="state"> 更新中...</span></div>
          <div id="repl-numbers" class="dashboard-interior-chart pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-3">
            <div class="inner">
              <div class="top dashboard-subtitle-bar">总计</div>
              <div class="bottom">
                <table>
                  <tbody>
                    <tr>
                      <td>事件复制</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>请求发布</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>连接失败</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div id="repl-ticks" class="dashboard-interior-chart pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-3">
            <div class="inner">
              <div class="top dashboard-subtitle-bar">刻度</div>
              <div class="bottom">
                <table>
                  <tbody>
                    <tr>
                      <td>应用</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>处理</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>可用</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div id="repl-progress" class="dashboard-interior-chart pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-3">
            <div class="inner">
              <div class="top dashboard-subtitle-bar">进度</div>
              <div class="bottom">
                <table>
                  <tbody>
                    <tr>
                      <td>消息</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>时间</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>连接失败</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div></script><script id="databaseView.ejs" type="text/template"><div class="headerBar">
    <div class="search-field">
      <input type="text" value="<%=searchString%>" id="databaseSearchInput" class="search-input" placeholder="搜索..."/>
      <!-- <img id="databaseSearchSubmit" class="search-submit-icon">-->
      <i id="databaseSearchSubmit" class="fa fa-search"></i>
    </div>
    <div class="headerButtonBar">
        <ul class="headerButtonList">
          <li class="enabled">
            <a id="databaseToggle" class="headerButton">
              <span class="icon_avocadodb_settings2" title="设置"></span>
            </a>
          </li>
        </ul>
      </div>

  </div>


  <div id="databaseDropdown2" class="headerDropdown">

    <div id="databaseDropdown" class="dropdownInner">
      <ul>
        <li class="nav-header">排序</li>
        <li><a>
          <label class="checkbox checkboxLabel">
            <input class="css-checkbox" type="checkbox" id="dbSortDesc">
            <i class="fa"></i>
             降序
          </label>
        </a></li>
      </ul>
    </div>

  </div>


  <div class="contentDiv" id="userManagementView">
    <div class="tileList pure-u">
      <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">
        <div class="fullBorderBox">
          <a href="#" id="createDatabase" class="add">
            <span id="newDatabase" class="pull-left add-Icon"><i class="fa fa-plus-circle"></i></span>
            新建数据库
          </a>
        </div>
      </div> <% collection.forEach(function(db) {
          var name = db.get("name");
      %> <% if (name !== '_system') { %> <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">
          <div class="fullBorderBox" style="border: 0;">
            <div class="borderBox"></div>
            <div class="iconSet">
              <span class="icon_avocadodb_settings2 editDatabase" id="<%=name %>_edit-database" alt="编辑数据库" title="编辑数据库"></span>
            </div>
            <img src="img/databaseIcon.svg" class="tile-icon-svg svgToReplace"/>
            <div class="tileBadge">
            </div>
            <h5 class="collectionName" style="margin-left: 0; margin-right: 0;"><%=name %></h5>
          </div>
        </div> <%};%> <%});%> </div>
  </div></script><script id="dbSelectionView.ejs" type="text/template"><a href="#" class="tab disabled" id="dbselection"><div class="dbselection"><i class="fa fa-database"></i><span class="db-name">数据: </span> <%=current%> <!-- <i class="fa fa-caret-square-o-down"></i> -->
</div>
<!-- <b class="caret"></b> -->
</a>

<!--
<ul class="link-dropdown-menu" id="dbs_dropdown"> <%
if (list.length > 0) {
%> <li class="dropdown-header">数据库</li> <%
    _.each(list, function(i) {
  %> <li class="dropdown-item">
        <a id=<%=i%> class="dbSelectionLink tab" href="#"><%=i%></a>
    </li> <%
    });
  %> <%
}
%> <% if (current === "_system") { %> <% if (list.length >= 2) { %> <li class="divider"></li> <% } %> <li class="dropdown-header">管理</li>
    <li id="databaseNavi" class="dropdown-item">
      <a id="databases" class="tab" href="#databases">管理数据库</a>
    </li> <% } %> </ul>
--></script><script id="documentsView.ejs" type="text/template"><div id="transparentHeader" class="headerBar marginTop5">

  <div id="documentsToolbar" class="headerButtonBar">

  <!-- remove marker for docupdiv-->
  <ul class="headerButtonList">
    <!-- Mark: removed prev/next collection button
    <li class="enabled">
      <a id="collectionNext" class="headerButton">
        <span class="icon_avocadodb_arrowright" title="下一个数据表"></span>
      </a>
    </li>
    <li class="enabled">
      <a id="collectionPrev" class="headerButton collection-pagination">
        <span class="icon_avocadodb_arrowleft" title=" 上一个数据表"></span>
      </a>
    </li>
    -->
    <li class="enabled">
        <select id="documentSize" class="documents-size">
          <option value="10" selected="">10 行</option>
          <option value="20">20 行</option>
          <option value="50">50 行</option>
          <option value="100">100 行</option>
          <option value="500">500 行</option>
          <option value="1000">1000 行</option>
          <option value="2500">2500 行</option>
          <option value="5000">5000 行</option>
          <option value="all">全部</option>
        </select>
      </a>
    <li class="enabled">
      <a id="markDocuments" class="headerButton">
        <span title="Edit documents"><i class="fa fa-hand-pointer-o"></i></span>
      </a>
    </li>
    <li class="enabled">
      <a id="importCollection" class="headerButton">
        <span title="Upload documents from JSON file"><i class="fa fa-upload"></i></span>
      </a>
    </li>
    <li class="enabled">
      <a id="exportCollection" class="headerButton">
        <span title="Download documents as JSON file"><i class="fa fa-download" style="margin-top: 1px;"></i></span>
      </a>
    </li>
    <li class="enabled" style="margin-right: 15px">
      <a id="filterCollection" class="headerButton">
        <span title="Filter collection"><i class="fa fa-filter"></i></span>
      </a>
    </li>
  </ul>

  </div>
</div>

<div class="avocadoDropdown documentsDropdown">
  <div id="filterHeader" class="headerDropdown">
     <div style="float: right;">
       <button id="resetView" class="button-warning btn-old-padding">重置</button>
       <button id="filterSend" class="button-success btn-old-padding">过滤</button>
       <input type="text" id="docsSort" style="float: right" placeholder="按属性排序"></input>
    </div>
    <div class="queryline querylineAdd">
       <input id="attribute_name0" type="text" placeholder="属性名称"><select name="operator" id="operator0" class="filterSelect">
           <option value="==">==</option>
           <option value="!=">!=</option>
           <option value="&lt;">&lt;</option>
           <option value="&lt;=">&lt;=</option>
           <option value="&gt;">&gt;</option>
           <option value="&gt;=">&gt;=</option>
           <option value="LIKE">LIKE</option>
           <option value="IN">IN</option>
           <option value="NOT IN">NOT IN</option>
           <option value="=~">REGEX</option>
       </select><input id="attribute_value0" type="text" placeholder="属性值" class="filterValue">
       <a id="addFilterItem" class="add-filter-item"><i class="fa fa-plus-circle"></i></a>
     </div>
  </div>

  <div id="importHeader" class="dropdownImport">
    <div class="queryline">
      <input id="importDocuments" name="importDocuments" type="file" accept="application/json" />
      <button id="confirmDocImport" class="button-success btn-old-padding" style="float:right" disabled>
        <span class="upload-indicator"><i id="uploadIndicator" class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>导入 JSON
      </button>
      <div title='示例输入数据:<br /><br /> I. Line-wise: <br /> { "_key": "key1", ... } <br /> { "_key": "key2", ... } <br /><br /> or <br /><br /> II. JSON documents embedded into a list: <br /> [ <br /> &nbsp; { "_key": "key1", ... }, <br /> &nbsp; { "_key": "key2", ... }, <br /> &nbsp; ... <br /> ]' class="upload-info" style="float:left; margin-top:7px; margin-right: 10px;"><i style="font-size: 13pt;" class="fa fa-info-circle"></i></div>
    </div>
  </div>

  <div id="exportHeader" class="headerDropdown">
    <div class="queryline">
      <div style="float:left; margin-top:7px"><i class="fa fa-exclamation-circle"></i>请小心。如果未设置筛选器, 则将下载整个集合。
 </div>
      <button id="exportDocuments" class="button-success btn-old-padding" style="float:right">下载 JSON</button>
    </div>
  </div>

  <div id="editHeader" class="dropdownImport">
    <div class="queryline">
      <div style="float:left; margin-top:5px"><div style="float:left" class="selectedCount">0</div> &nbsp; 选定的文档</div>
      <button id="deleteSelected" class="button-neutral btn-old-padding" style="float:right">删除</button>
      <button id="moveSelected" class="button-neutral btn-old-padding" style="float:right">剪切</button>
    </div>
  </div>

</div>

<div id="documentsDiv" class="innerContent">

<div id="uploadMessages"></div>

<div id="docPureTable">

</div>

<!--
<div id="documentsTableID_wrapper" class="dataTables_wrapper" role="grid">
  <table class="display avocadoDataTable dataTable" id="documentsTableID">
  </table>
</div>
-->

    <div id="documentsToolbarFL">
      <div id="documentsToolbarF" class="pagination-line">
      </div>
    </div>

<!-- Delete Modal -->
<div id="docDeleteModal" style="display:none" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <a class="avocadoHeader">删除数据集?</a>
  </div>
  <div class="modal-body" id="deleteDoc">
    <p style="padding: 20px;">There is no way back…</p>
  </div>
  <div class="modal-footer">
    <button class="button-close" data-dismiss="modal" aria-hidden="true">返回</button>
    <button id="confirmDeleteBtn" class="button-danger" style="float:right" disabled="true">删除</button>
  </div>
</div></script><script id="documentView.ejs" type="text/template"><div class="headerBar">
    <div class="headerButtonBar">
      <ul class="headerButtonList">
        <li class="enabled">
          <a id="addDocument" class="headerButton">
            <span title="添加新文档">
              <i class="fa fa-file fa-stack-1x"></i>
              <i class="fa fa-plus fa-stack-1x fa-top"></i>
            </span>
          </a>
        </li>
      </ul>
    </div>

  </div>

  <div class="innerContent document-info-div">

    <div class="document-info">

      <div class="document-type-container">
        <div id="document-type" class="document-bold-font"></div>
        <div id="document-id" class="document-thin-font"></div>
      </div>

      <div class="document-info-container">

        <div class="document-inner-info-container">
          <div class="document-attribute">
            <div class="document-bold-font">_rev:</div>
            <div id="document-rev" class="document-thin-font"></div>
          </div>
          <div class="document-attribute">
            <div class="document-bold-font">_key:</div>
            <div id="document-key" class="document-thin-font"></div>
          </div>
        </div>

        <div class="document-inner-info-container edge-info-container">
          <div class="document-attribute">
            <div class="document-bold-font">_from:</div>
            <div id="document-from" class="document-thin-font document-link"></div>
          </div>
          <div class="document-attribute">
            <div class="document-bold-font">_to:</div>
            <div id="document-to" class="document-thin-font document-link"></div>
          </div>
        </div>

      </div>

    </div>

  </div>

  <div id="tableDiv" class="innerContent document-content-div">

    <div id="documentEditor" class="document-editor"></div>
    <div class="bottomButtonBar">
      <button id="saveDocumentButton" class="button-success pull-right">保存</button>
      <button id="deleteDocumentButton" class="button-danger pull-right">删除</button>
    </div>
    <div class="pull-left shortcuts showHotkeyHelp"></div>
	</div></script><script id="edgeDefinitionTable.ejs" type="text/template"><tr class="tableRow" id="row_newEdgeDefinitions<%= number%>">
    <th class="collectionTh">Edge 定义*:</th>
    <th class="collectionTh">
      <input type="hidden" id="newEdgeDefinitions<%= number%>" value="" placeholder="Edge 定义" tabindex="-1" class="select2-offscreen">
      <button id="remove_newEdgeDefinitions<%= number%>" class="graphViewer-icon-button gv_internal_remove_line gv-icon-small delete"></button>
    </th><th>
    <span class="modalTooltips avocadoicon icon_avocadodb_info" title="一些edge定义的信息">
    </span>
    </th>
  </tr>
  <tr class="tableRow" id="row_fromCollections<%= number%>">
    <th class="collectionTh">顶点数据集*:</th>
    <th class="collectionTh">
      <input type="hidden" id="fromCollections<%= number%>" value="" placeholder="顶点数据集" tabindex="-1" class="select2-offscreen">
    </th><th>
    <span class="modalTooltips avocadoicon icon_avocadodb_info" title="包含关系的起始顶点的数据集.">
    </span>
  </th>
  </tr>
  <tr class="tableRow" id="row_toCollections<%= number%>">
    <th class="collectionTh">结束点数据集*:</th>
    <th class="collectionTh">
      <input type="hidden" id="toCollections<%= number%>" value="" placeholder="结束点数据集" tabindex="-1" class="select2-offscreen">
    </th><th>
    <span class="modalTooltips avocadoicon icon_avocadodb_info" title="包含关系结束顶点的数据集.">
    </span>
  </th>
  </tr></script><script id="editListEntryView.ejs" type="text/template"><td class="writable sorting_1"> <% if (isReadOnly) { %> <span class="key"><%=key%></span> <% } else { %> <input type="text" class="key" placeholder="attribute" <%=key?"value=" + key:""%>></input> <% } %> </td>
<td class="writeable rightCell"> <% if (isReadOnly) { %> <span class="val"><%=value%></span> <% } else { %> <textarea class="val" placeholder="value"><%=value?value:""%></textarea> <% } %> </td>
</td>
<td class="leftCell">
  <a class="deleteAttribute">
    <span class="icon_avocadodb_roundminus" data-original-title="Delete attribute"></span>
  </a>
</td></script><script id="filterSelect.ejs" type="text/template"><div class="filterSelectBox">
  <div class="filterLabel"><%=name%><span><i class="fa fa-close" id="closeFilter"></i></span></div>

  <div class="filterInput">
    <input type="text" id="<%=name%>-filter" placeholder="Filter <%=name%>" aria-label="Filter labels" autocomplete="off">
  </div>

  <div class="filterOptions">
    <div id="showAll"><strong> 显示全部</strong></div> <% var cssClass; %> <% _.each(options, function (option) { %> <% if (option.active) { %> <%  cssClass = 'active'; %> <% } else { %> <% cssClass = 'inactive'; %> <% } %> <div class="<%=cssClass%>" name="<%=option.name%>" id="<%=option.name%>-option"> <% var color = option.color || '#f6f8fa'; %> <% if (cssClass === 'active') { %> <span class="marked"><i class="fa fa-check"/></span> <% } else { %> <span style="visibility: hidden;" class="marked"><i class="fa fa-check"/></span> <% } %> <span class="color" style="background-color: <%=color%>">&nbsp;</span>
        <span class="name"><%=option.name%></span>
      </div> <% }); %> </div>

</div></script><script id="footerView.ejs" type="text/template"> <%
  var n,v,db;
  if (name) {
    n = name || "";
    v = version || "";
  }
%> <div class="footer-left">
</div>

<div class="footer-center">
  <p>帮助 <i class="fa fa-keyboard-o"></i></p>
</div>

<div class="footer-right">
  <p><% if(n) { %><a><%=n%> <%=v%> <% } %></a></p>
</div></script><script id="foxxActiveView.ejs" type="text/template"><div class="paddingBox">
    <div class="borderBox"></div>
    <img src="<%= model.thumbnailUrl %>" height="50" width="50" alt="Icon for Service" class="icon"> <% if(model.isDevelopment()) { %> <div class="tileBadge">
        <span>
          <div class="corneredBadge development">
            开发
          </div>
        </span>
      </div> <% } %> <h5 class="collectionName"> <%= model.get("mount") %> <% if(model.get("name")) { %> (<%= model.get("name") %>) <% } %> </h5>
  </div></script><script id="foxxEditView.ejs" type="text/template"> <%var appInfos = attributes.app.split(":"); %> <div id="change-foxx" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display:none">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <a class="avocadoHeader">Modify Service</a>
  </div>
  <div class="modal-body">
    <table>
      <tr>
        <th class="collectionTh">名字:</th>
        <th class="collectionTh"><strong><%=appInfos[1] %></strong></th>
      </tr>
      <tr>
        <th class="collectionTh">数据集:</th>
        <th class="collectionTh"><%=documentationJsonUrl</th>
      </tr>
      <tr>
        <th class="collectionTh">挂载:</th>
        <th class="collectionTh"><input type="text" id="change-mount-point" name="mountpoint" value="<%=attributes.mount%>"/></th>
        <th><span class="modalTooltips avocadoicon icon_avocadodb_info" title="The path where the app can be reached."></span></th>
      </tr>
      <tr>
        <th class="collectionTh">版本:</th>
        <th class="collectionTh">
          <select>
            <option selected><%=appInfos[2] %></option>
          </select>
        <th>
      </tr>
      <tr>
        <th class="collectionTh">系统:</th>
        <th class="collectionTh"> <%=attributes.isSystem ? "Yes" : "No" %> <th>
      </tr>
      <tr>
        <th class="collectionTh">状态:</th>
        <th class="collectionTh"> <%if (attributes.active) {%> <div class="modal-text active">
              Active
            </div> <%} else {%> <div class="modal-text inactive">
              活动
            </div> <%}%> </th>
      </tr>
    </table>
  </div>
  <div id="colFooter" class="modal-footer">
    <button id="uninstall" class="button-danger"<%=(attributes.isSystem || attributes.development) ? " disabled" : ""%>>卸载</button>
    <button id="change" class="button-success pull-right">保存</button> <%if (false && attributes.active) {%> <button id="deactivate" class="button-warning pull-right" style="margin-right:8px" disabled>停</button> <%} else if (false) {%> <button id="activate" class="button-success pull-right" style="margin-right:8px" disabled>激活</button> <%}%> </div>
</div></script><script id="foxxMountView.ejs" type="text/template"><div id="install-foxx" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display:none">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <a class="avocadoHeader">安装服务</a>
  </div>
  <div class="modal-body">
    <table>
      <tr>
        <th class="collectionTh">名字:</th>
        <th class="collectionTh"><strong><%=attributes.name %></strong></th>
      </tr>
      <tr>
        <th class="collectionTh">&nbsp;</th>
        <th class="collectionTh">&nbsp;</th>
      </tr>
      <tr>
        <th class="collectionTh">挂载:</th>
        <th class="collectionTh">
          <input type="text" id="mount-point" name="mountpoint" value="/<%=attributes.name%>" placeholder="路径" />
        </th>
        <th><a class="modalTooltips" title="可以到达应用程序的路径."><i class="avocadoicon icon_avocadodb_info"></i></a></th>
      </tr>
      <tr>
        <th class="collectionTh">版本:</th>
        <th class="collectionTh"> <%=attributes.version %> <th>
      </tr>
      <tr>
        <th class="collectionTh">系统:</th>
        <th class="collectionTh"> <%=attributes.isSystem ? "Yes" : "No" %> <th>
      </tr>
    </table>
  </div>
  <div id="colFooter" class="modal-footer">
    <button class="button-success pull-right installFoxx">安装</button>
    <button id="cancel" class="button-danger pull-right">取消</button>
  </div>
</div></script><script id="graphManagementView.ejs" type="text/template"><div class="headerBar">
    <div class="search-field">
      <input type="text" value="<%=searchString%>" id="graphManagementSearchInput" class="search-input" placeholder="搜索..."/>
      <i id="graphManagementSearchSubmit" class="fa fa-search"></i>
      <!-- <img id="graphManagementSearchSubmit" class="search-submit-icon"> -->
    </div>
     <div class="headerButtonBar">
        <ul class="headerButtonList">
          <li class="enabled">
            <a id="graphManagementToggle" class="headerButton">
              <span class="icon_avocadodb_settings2" title="设置"></span>
            </a>
          </li>
        </ul>
      </div>
  </div>


  <div id="graphManagementDropdown2" class="headerDropdown">

    <div id="graphManagementDropdown" class="dropdownInner">
      <ul>
        <li class="nav-header">排序</li>
        <li><a>
          <label class="checkbox checkboxLabel">
            <input class="css-checkbox" type="checkbox" id="graphSortDesc">
            <i class="fa"></i>
            降序
          </label>
        </a></li>
      </ul>
    </div>

  </div>


  <div class="contentDiv" id="avocadoCollectionsContainer">
    <div id="graphManagementThumbnailsIn" class="tileList pure-u">
      <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">
        <div class="fullBorderBox">
          <a href="#" id="createGraph" class="add">
            <span id="newGraph" class="pull-left add-Icon"><i class="fa fa-plus-circle"></i></span>
            添加图形数据库
          </a>
        </div>
      </div> <% graphs.forEach(function(graph) {
        var graphName = graph.get("_key");
        var isSmart = graph.get("isSmart");
      %> <div class="tile tile-graph pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6" id="<%=graphName %>_tile">
        <div class="paddingBox">
          <div class="borderBox"></div>
          <div class="iconSet">
            <span class="icon_avocadodb_settings2 editGraph" id="<%=graphName %>_settings" alt="Edit graph" title="修改图形数据库"></span>
          </div>
          <span class="icon_avocadodb_edge5 tile-icon"></span>
          <span class="icon_avocadodb_edge5 icon_avocadodb_edge5-2 tile-icon"></span>
          <div class="tileBadge"> <% if (isSmart === true) { %> <span><div class="corneredBadge inProgress">自动</div></span> <% } %> </div>
          <h5 class="collectionName"><%=graphName %></h5>
        </div>
      </div> <%});%> </div>
  </div></script><script id="graphSettingsView.ejs" type="text/template"> <% var genClass = 'pure-u-1-3'; %> <% var genClass2 = 'pure-u-2-3'; %> <% var formatName = function(name) { %> <% var formattedName = %> <% return name.charAt(0).toUpperCase() + string.slice(1);%> <% }; %> <div id="graphSettingsView" class="innerContent">

    <div class="pure-g" style="margin-top: -13px">
      <div class="pure-u-1-1 pure-u-md-1-1 pure-u-lg-1-1 pure-u-xl-1-1">

        <div class="pure-g pure-table pure-table-body"> <% _.each(general, function(val, key) { %> <% if (val.type === 'divider') { %> <div class="pure-u-1-1 left heading"><%=val.name%></div> <% } else { %> <div class="<%= genClass %> left"> <%=val.name%> </div>
            <div class="<%= genClass2 %> left"> <% if (val.type === 'select') { %> <select id="g_<%=key%>"> <% _.each(val, function(option, optKey) { %> <% if (option.name) { %> <option value="<%=option.val%>"> <%=option.name%> </option> <% } %> <% }); %> </select> <% } %> <% if (val.type === 'string') { %> <input id="g_<%=key%>" type="text" placeholder="attribute"></input> <% } %> <% if (val.type === 'number') { %> <input id="g_<%=key%>" type="text" id="<%=val %>" value="<%=val.value %>" placeholder=""></input> <% } %> <% if (val.type === 'range') { %> <label id="g_<%=key%>_label" class="rangeLabel">1</label>
                <input id="g_<%=key%>" type='range' min="0" max="9" val="1"/> <% } %> <% if (val.type === 'color') { %> <input id="g_<%=key%>" type='color' name='color' value="<%=VALUE%>"/> <% } %> <i title="<%=val.desc%>" class="fa fa-info-circle gv-tooltips" aria-hidden="true"></i>
              </div> <% } %> <% }); %> </div>

      </div>

      <div class="pure-u-1-1 pure-u-md-1-1 pure-u-lg-1-1 pure-u-xl-1-1">

        <div class="pure-g pure-table pure-table-body"> <% _.each(specific, function(val, key) { %> <% if (val.hide !== 'true') { %> <% if (val.type === 'divider') { %> <div class="pure-u-1-1 left heading"><%=val.name%></div> <% } else { %> <div class="<%= genClass %> left"> <%=val.name%> </div>

                <div class="<%= genClass2 %> left"> <% var VALUE; %> <% if (val.value) { %> <% VALUE = val.value %> <% } else { %> <% VALUE = val.default %> <% } %> <% if (val.type === 'string') { %> <input id="g_<%=key%>" type="text" placeholder="attribute"></input> <% } %> <% if (val.type === 'number') { %> <input id="g_<%=key%>" type="text" placeholder="number"></input> <% } %> <% if (val.type === 'color') { %> <input id="g_<%=key%>" type='color' name='color' value="<%=VALUE%>"/> <% } %> <% if (val.type === 'range') { %> <label id="g_<%=key%>_label" class="rangeLabel">1</label>
                    <input id="g_<%=key%>" type='range' min="0" max="9" val="1"/> <% } %> <% if (val.type === 'select') { %> <select id="g_<%=key%>"> <% _.each(val, function(option, optKey) { %> <% if (option.name) { %> <option value="<%=option.val%>"> <%=option.name%> </option> <% } %> <% }); %> </select> <% } %> <i title="<%=val.desc%>" class="fa fa-info-circle gv-tooltips" aria-hidden="true"></i>
                </div> <% } %> <% } %> <% }); %> </div>

        <div class="pure-u-1-1">
          <button id="saveGraphSettings" style="margin-top: 20px; margin-right: 10px;" class="button-success pull-right">保存</button>
          <button id="restoreGraphSettings" style="margin-top: 20px;" class="button-success pull-right">重置默认</button>
        </div>
      </div>
  </div></script><script id="graphViewer2.ejs" type="text/template"><div class="graphContent" id="graphContainer">

    <div class="headerBar">
      <div class="headerButtonBar" style="margin: 0;">
        <ul class="headerButtonList">
          <li class="enabled">
            <a id="settingsMenu" class="headerButton">
              <span title="配置图形设置">
                <i class="fa fa-bars fa-stack-1x"></i>
              </span>
            </a>
          </li>
          <li class="enabled">
            <a id="graph-fullscreen-btn" class="headerButton">
              <span title="切换到全屏模式">
                <i class="fa fa-television"></i>
              </span>
            </a>
          </li>
          <li class="enabled">
            <a id="downloadPNG" class="headerButton">
              <span title="下载可视图形为 png 图像">
                <i class="fa fa-camera fa-stack-1x"></i>
              </span>
            </a>
          </li>
          <li class="enabled">
            <a id="loadFullGraph" class="headerButton">
              <span title="下载全图-慎用">
                <i class="fa fa-share-alt"></i>
              </span>
            </a>
          </li>
          <!--
          <li class="enabled">
            <a id="selectNodes" class="headerButton">
              <span title="Lasso tool - Select and delete multiple nodes">
                <i class="fa fa-paint-brush fa-stack-1x"></i>
              </span>
            </a>
          </li>
          -->
        </ul>
      </div>
    </div>

    <!--<div id="graph-fullscreen-btn"><i class="fa fa-desktop"></i></div>-->
    <div id="graph-container" oncontextmenu="return false;"></div>
  </div></script><script id="graphViewGroupByEntry.ejs" type="text/template"><div class="control-group">
  <label for="<%=type %>_<%=id%>" class="control-label">属性 <%=id%></label>
  <div class="controls">
    <input id="<%=type %>_<%=id%>" type="text" name="<%=type %>_<%=id%>" placeholder="Attribute" maxlength="75" class="input-xlarge">
    <button id="remove_<%=type %>_<%=id%>" class="graphViewer-icon-button gv_internal_remove_line gv-icon-small delete" />
  </div>
</div></script><script id="helpUsView.ejs" type="text/template"><div class="helpUs">
  还没写东西呢
</div></script><script id="indicesView.ejs" type="text/template"> <% if (typeof supported !== 'undefined') { %> <div class="contentIn" id="indexHeaderContent">
        <div id="indexEditView">
          <table id="collectionEditIndexTable" class="edit-index-table avocado-table">
            <thead>
              <tr class="figuresHeader">
                <th class="collectionInfoTh">ID</th>
                <th class="collectionInfoTh">Type</th>
                <th class="collectionInfoTh">Unique</th>
                <th class="collectionInfoTh">Sparse</th>
                <th class="collectionInfoTh">Deduplicate</th>
                <th class="collectionInfoTh">Selectivity Est.</th>
                <th class="collectionInfoTh">Fields</th>
                <th class="collectionInfoTh">Action</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
            <tfoot>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td><i class="fa fa-plus-circle" id="addIndex"></i></td>
              </tr>
            </tfoot>
          </table>
      </div>

          <div id="newIndexView" class="new-index-view" style="display:none">
            <table>
              <tr>
                <th class="collectionTh">类型:</th>
                <th class="">
                  <select id="newIndexType"> <% if (supported.indexOf('geo') > -1) { %> <option value="Geo">geo索引</option> <% } %> <% if (supported.indexOf('hash') > -1) { %> <option value="Hash">哈希索引</option> <% } %> <% if (supported.indexOf('persistent') > -1) { %> <option value="Persistent">持久 索引</option> <% } %> <% if (supported.indexOf('fulltext') > -1) { %> <option value="Fulltext">全文索引</option> <% } %> <% if (supported.indexOf('skiplist') > -1) { %> <option value="Skiplist">跳过列表 索引</option> <% } %> </select>
                </th>
                <th class="" style="width: 18px"/>
              </tr>
            </table>
            <div id="newIndexTypeGeo" class="newIndexClass" style="display: none">
              <table>
                <tr>
                  <th class="collectionTh">Fields:</th>
                  <th><input type="text" id="newGeoFields" value=""/></th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="具有一个或两个属性路径的逗号分隔列表. Example: latitude,longitude">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
                <tr>
                  <th class="collectionTh">Geo JSON:</th>
                  <th>
                    <input id="newGeoJson" type="checkbox" name="newGeoJson" value="true">
                  </th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Set geoJson to true if the coordinates stored in the specified attribute are arrays in the form [longitude,latitude].">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
              </table>
            </div>
            <div id="newIndexTypePersistent" class="newIndexClass" style="display:none">
              <table>
                <tr>
                  <th class="collectionTh">Fields:</th>
                  <th><input type="text" id="newPersistentFields" value=""/></th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="A comma-separated list of attribute paths.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
                <tr>
                  <th class="collectionTh">Unique:</th>
                  <th>
                    <input id="newPersistentUnique" type="checkbox" name="newPersistentUnique" value="true">
                  </th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="If true, then create a unique index.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
                <tr>
                  <th class="collectionTh">Sparse:</th>
                  <th>
                    <input id="newPersistentSparse" type="checkbox" name="newPersistentSparse" value="true">
                  </th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="If true, then create a sparse index.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
                <tr>
                  <th class="collectionTh">Deduplicate:</th>
                  <th>
                    <input id="newPersistentDeduplicate" type="checkbox" name="newPersistentDeduplicate" value="true">
                  </th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Duplicate index values from the same document into a unique array index will lead to an error or not.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
              </table>
            </div>
            <div id="newIndexTypeHash" class="newIndexClass" style="display:none">
              <table>
                <tr>
                  <th class="collectionTh">Fields:</th>
                  <th><input type="text" id="newHashFields" value=""/></th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="A comma-separated list of attribute paths.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
                <tr>
                  <th class="collectionTh">Unique:</th>
                  <th>
                    <input id="newHashUnique" type="checkbox" name="newHashUnique" value="true">
                  </th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="If true, then create a unique index.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
                <tr>
                  <th class="collectionTh">Sparse:</th>
                  <th>
                    <input id="newHashSparse" type="checkbox" name="newHashSparse" value="true">
                  </th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="If true, then create a sparse index.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
                <tr>
                  <th class="collectionTh">Deduplicate:</th>
                  <th>
                    <input id="newHashDeduplicate" type="checkbox" name="newHashDeduplicate" value="true">
                  </th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Duplicate index values from the same document into a unique array index will lead to an error or not.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
              </table>
            </div>
            <div id="newIndexTypeFulltext" class="newIndexClass" style="display:none">
              <table>
                <tr>
                  <th class="collectionTh">Fields:</th>
                  <th><input type="text" id="newFulltextFields" value=""/></th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="A single attribute path. Example: message.text">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
                <tr>
                  <th class="collectionTh">Min. length:</th>
                  <th><input type="text" id="newFulltextMinLength" value=""/></th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Minimum character length of words to index. Will default to a server-defined value if unspecified. It is thus recommended to set this value explicitly when creating the index.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
              </table>

            </div>
            <div id="newIndexTypeSkiplist" class="newIndexClass" style="display:none">
              <table>
                <tr>
                  <th class="collectionTh">Fields:</th>
                  <th><input type="text" id="newSkiplistFields" value=""/></th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="A comma-separated list of attribute paths.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
                <tr>
                  <th class="collectionTh">Unique:</th>
                  <th>
                    <input id="newSkiplistUnique" type="checkbox" name="newSkiplistUnique" value="true">
                  </th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="If true, then create a unique index.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
                <tr>
                  <th class="collectionTh">Sparse:</th>
                  <th>
                    <input id="newSkiplistSparse" type="checkbox" name="newSkiplistSparse" value="true">
                  </th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="If true, then create a sparse index.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
                <tr>
                  <th class="collectionTh">Deduplicate:</th>
                  <th>
                    <input id="newSkiplistDeduplicate" type="checkbox" name="newSkiplistDeduplicate" value="true">
                  </th>
                  <th class="tooltipInfoTh">
                    <div>
                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Duplicate index values from the same document into a unique array index will lead to an error or not.">
                        <span rel="tooltip" class="avocadoicon icon_avocadodb_info"></span>
                      </a>
                    </div>
                  </th>
                </tr>
              </table>
            </div>
            <div class="index-button-bar index-button-bar2">
              <button id="createIndex" class="button-success" style="margin-left: 15px;">创建</button>
              <button id="cancelIndex" class="button-close" style="margin-left: 0;"><i class="fa fa-arrow-left"></i>
                <span style="margin-left: 5px;">返回</span>
              </button>
            </div>
        </div>
        <div id="modal-dialog">
          <div class="modal-footer" style="border: none"></div>
        </div>
      </div> <% } %> </script><script id="lineChartDetailView.ejs" type="text/template"><div id="lineChartDetail" class="modal hide fade modal-chart-detail" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display:none">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			<a class="avocadoHeader"><%=figure%></a>
		</div>
		<div id="dashboardDetailedLineChart" class="dashboardDetailChart" style="position: absolute"></div>
	</div></script><script id="loadingTableView.ejs" type="text/template"><thead>
  <tr role="row">
    <th class="sorting_disabled docsFirstCol">内容</th>
    <th class="sorting_disabled docsSecCol">_key</th>
    <th class="sorting_disabled docsThirdCol">
      <a id="addDocumentButton" class="pull-right addButton"><span class="avocadoicon icon_avocadodb_roundplus" title="新建数据库"></span></a>
    </th>
  </tr>
</thead>
<tbody>
  <tr class="odd">
    <td valign="top" class="dataTables_empty">载入中...</td>
  </tr>
</tbody></script><script id="loggerView.ejs" type="text/template"><div id="loggerContent" class="logger-content-id innerContent">

    <div class="avocadoToolbar avocadoToolbarTop">

      <div class="pull-left">
      </div>

      <div class="pull-right">
        <button id="logTopicSelection" class="button-default filterSelect">专题 <i class="fa fa-caret-down"></i></button>
        <button id="logLevelSelection" class="button-default filterSelect">等级 <i class="fa fa-caret-down"></i></button>
        <button style="display: none" class="button-default filterSelect" id="logFilters">
          <i class="fa fa-close"></i>Clear current <a id="filterDesc"></a> 筛选
        </button>
      </div>

    </div>

    <div id="noLogEntries" style="display: none">
      <span>找不到合适的日志条目
  </span>
    </div>

    <div id="logEntries">
    </div>

    <div class="actions">
      <button id="loadMoreEntries" class="button-success">加载更多的条目</button>
    </div>

  </div></script><script id="loggerViewEntries.ejs" type="text/template"> <% _.each(entries, function (entry) { %> <div class="pure-g" level="<%=entry.status.toLowerCase()%>" topic="<%=entry.topic.toLowerCase()%>">
      <div class="pure-u-1-24">
        <p class="labels"> <% var lcolor = avocadoHelper.statusColors[entry.status.toLowerCase()];%> <% var tcolor = avocadoHelper.alphabetColors[entry.topic.charAt(0).toLowerCase()];%> <span class="tippy level" title="Level: <%=entry.status%>" style="background: <%=lcolor%>"></span>
          <span class="tippy topic" title="Topic: <%=entry.topic%>" style="background: <%=tcolor%>"></span>
        </p>
      </div>
      <div class="pure-u-19-24 desc">
        <p class="msg"><%=entry.msg%></p>
      </div>
      <div class="pure-u-4-24 date">
        <p> <% var x = moment(entry.timestamp, "X").fromNow() %> <i class="fa fa-clock-o" aria-hidden="true"></i>
          <span class="tippy" title="<%=entry.date%>"><%= x %></span>
        </p>
      </div>
      <div class="logBorder"></div>
    </div> <% }); %> </script><script id="loginView.ejs" type="text/template"><div class="loginFixedWindow">
  <style>
    .centos{
      display: block;
      width: 300px;
      margin: 0 auto;
    }
    .centos h1{
      text-align: center;
    }
  </style>
  <div id="loginWindow" class="login-window">
    <div class="login-logo-round">
      <object id="loginSVG" data="img/avocadodb-edition-login-optimized.svg" type="image/svg+xml">
        <img src="img/avocadodb_logo_small.png" />
      </object>
    </div>
    <p class="wrong-credentials" style="display:none">登录失败!</p>
    <p class="checking-password" style="display:none">
      <i class="fa fa-circle-o-notch fa-spin fa-fw"></i>
      <span class="sr-only">载入中...</span>
    </p>
    <div class="centos">
      <h1>简单多用的中文数据库</h1>
    </div>
    <form id="loginForm">
      <input class="login-input" placeholder="用户名" id="loginUsername" type="text" name="username"><i class="fa fa-user"></i>
      <input class="login-input" placeholder="密码" id="loginPassword" type="password" name="password" autocomplete="off"><i class="fa fa-lock"></i>


      <button id="submitLogin" class="button-success pull-right">登录</button>
    </form>

    <div id="databases" style="display: none">
      <form id="dbForm">
          <i class="fa fa-database"></i>
          <select id="loginDatabase">
            <option>数据库</option>
          </select>
          <button id="goToDatabase" class="button-success pull-right">选择</button>
      </form>
      <button id="logout" class="button-danger pull-right">退出</button>
    </div>
  </div>
</div></script><script id="modalApplicationMount.ejs" type="text/template"><table>
    <tr class="tableRow"> <% if (content === true) { %> <th class="collectionInfoTh">
        运行卸载:
        </th>
        <th class="collectionInfoTh">
          <input type="checkbox" id="new-app-teardown"></input>
        </th> <% } else { %> <th class="collectionInfoTh">
          挂载*:
        </th>
        <th class="collectionInfoTh">
          <input type="text" id="new-app-mount" value="" placeholder="/my/foxx"></input>
        </th>
        <th>
          <span class="modalTooltips avocadoicon icon_avocadodb_info" title="应用程序将被安装的路径。必须从/。不允许以/_ 开头">
          </span>
        </th> <% } %> </tr>
  </table>

  <ul id="infoTab" class="nav nav-tabs">
    <li><a href="#newApp" data-toggle="tab" id="tab-new">新服务</a></li>
    <li class="active"><a href="#appstore" data-toggle="tab" id="tab-store"><img src="img/avocadodb_logo_small.png" alt="AvocadoDB" class="tab-icon" />商店</a></li>
    <li><a href="#github" data-toggle="tab" id="tab-git">第三方导入</a></li>
    <li><a href="#zip" data-toggle="tab" id="tab-zip">上传</a></li>
  </ul>

  <div class="tab-content" id="tab-content-application-info">

    <div class="tab-pane" id="newApp">
      <table id="new-app-information">
        <tr class="tableRow">
          <th class="collectionInfoTh">
            作者*:
          </th>
          <th class="collectionInfoTh">
            <input type="text" id="new-app-author" value="" placeholder="Your Name">
          </th>
        </tr>
        <tr class="tableRow">
          <th class="collectionInfoTh">
            名字*:
          </th>
          <th class="collectionInfoTh">
            <input type="text" id="new-app-name" value="" placeholder="Name of the Service">
          </th>
        </tr>
        <tr class="tableRow">
          <th class="collectionInfoTh">
            描述*:
          </th>
          <th class="collectionInfoTh">
            <input type="text" id="new-app-description" value="" placeholder="Please describe your Service here">
          </th>
        </tr>
        <tr class="tableRow">
          <th class="collectionInfoTh">
            许可证*:
          </th>
          <th class="collectionInfoTh">
            <input type="text" id="new-app-license" value="" placeholder="Apache 2"></input>
          </th>
        </tr>
        <!--
        <tr class="tableRow">
          <th class="collectionInfoTh">
            Authentication*:
          </th>
          <th class="collectionInfoTh">
            <input type="checkbox" id="new-app-authenticate" checked></input>
          </th>
        </tr>
        -->
        <tr class="tableRow">
          <th class="collectionInfoTh">
            文档数据表:
          </th>
          <th class="collectionInfoTh">
            <input type="hidden" id="new-app-document-collections" value="" placeholder="Document Collections"></input>
          </th>
          <th>
            <span class="modalTooltips avocadoicon icon_avocadodb_info" title="A list of document collections that will be created specifically for this Service. A CRUD API for these will be generated.">
            </span>
          </th>
        </tr>
        <tr class="tableRow">
          <th class="collectionInfoTh">
            图形数据库:
          </th>
          <th class="collectionInfoTh">
            <input type="hidden" id="new-app-edge-collections" value="" placeholder="Edge Collections"></input>
          </th>
          <th>
            <span class="modalTooltips avocadoicon icon_avocadodb_info" title="A list of edge collections that will be created specifically for this Service. A CRUD API for these will be generated.">
            </span>
          </th>
        </tr>
      </table>
    </div>

    <div class="tab-pane active" id="appstore">
      <table id="appstore-content">
        <tr>
          <td>抓取数据中...</td>
        </tr>
      </table>
    </div>

    <div class="tab-pane" id="github">
      <div>
        <p>
          Download a Foxx service from a public <a href="https://www.github.com">github.com</a> repository. In order to define a version please add a <a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">git tag</a> to your repository using the following format: "v1.2.3". To connect to github your username and the name of the repository are sufficient.
        </p>
        <table>
          <tr class="tableRow">
            <th class="collectionInfoTh">
              Repository*:
            </th>
            <th class="collectionInfoTh">
              <input type="text" id="repository" value="" placeholder="username/repository">
            </th>
          </tr>
          <tr class="tableRow">
            <th class="collectionInfoTh">
              Version*:
            </th>
            <th class="collectionInfoTh">
              <input type="text" id="tag" value="" placeholder="master">
            </th>
          </tr>
          <tr class="tableRow">
            <th class="collectionInfoTh">
              Enable Legacy Mode:
            </th>
            <th class="collectionInfoTh">
              <input type="checkbox" id="github-app-islegacy" value="true">
            </th>
          <th>
            <span class="modalTooltips avocadoicon icon_avocadodb_info" title="Legacy Compatibility Mode allows mounting some Foxx services written for AvocadoDB 2.8 or older. This overrides the AvocadoDB version specified in the service manifest. See the Foxx documentation for more information on running legacy services in AvocadoDB 3.">
            </span>
          </th>
          </tr>
        </table>
      </div>
    </div>

    <div class="tab-pane" id="zip">
      <div>
        <p>
Upload a Foxx service bundle. The Foxx service bundle should be a zip archive containing all service files as a directory structure, including the manifest and any required <code style="padding: 0px 2px; font-weight: 10pt;">node_modules</code> dependencies. If your service doesn't have any dependencies, configuration or scripts you can also upload a single JavaScript file that will act as the service's entry point or "main" file.
        </p>
        <table>
          <tr class="tableRow">
            <th class="collectionInfoTh">
              Enable Legacy Mode:
            </th>
            <th class="collectionInfoTh">
              <input type="checkbox" id="zip-app-islegacy" value="true">
            </th>
          <th>
            <span class="modalTooltips avocadoicon icon_avocadodb_info" title="Legacy Compatibility Mode allows mounting some Foxx services written for AvocadoDB 2.8 or older. This overrides the AvocadoDB version specified in the service manifest. See the Foxx documentation for more information on running legacy services in AvocadoDB 3.">
            </span>
          </th>
          </tr>
        </table>
      </div>
      <div id="upload-foxx-zip">上传</div>
    </div>
  </div></script><script id="modalBase.ejs" type="text/template"><div id="modal-dialog" class="modal hide fade createModalDialog" tabindex="-1" role="dialog"
       aria-labelledby="myModalLabel" aria-hidden="true"> <% if (title !== null) { %> <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <a class="avocadoHeader"><%=title%></a>
   </div> <%}%> <% if (tabBar) { %> <div class="modal-tabbar">
        <ul id="infoTab" class="nav nav-tabs"> <% var counter = 0; %> <% _.each(tabBar, function(value) { %> <% if (counter === 0) { %> <li class="active"><a href="#<%=value%>" data-toggle="tab"><%=value%></a></li> <%} else {%> <li><a href="#<%=value%>" data-toggle="tab"><%=value%></a></li> <% } %> <% counter++; %> <% }); %> </ul>
      </div> <%}%> <div class="modal-body"> <% if (tabBar) { %> <div class="tab-content"> <% var counter = 0; %> <% _.each(tabBar, function(value) { %> <% if (counter === 0) { %> <div class="tab-pane tab-pane-modal active" id="<%=value%>">
              </div> <%} else {%> <div class="tab-pane tab-pane-modal" id="<%=value%>">
              </div> <% } %> <% counter++; %> <% }); %> </div> <%}%> </div> <% if (!hideFooter) { %> <div class="modal-footer"> <%
      _.each(buttons, function(value, key){
        var type = value.type,
          title = value.title,
          disabled = '';
          if (value.disabled) {
            disabled = 'disabled';
          }
        %> <button id="modalButton<%=key%>" class="button-<%=type%>" <%=disabled%>><%=title%></button> <%});%> </div> <% } %> <div class="alert alert-error modal-delete-confirmation" id="modal-delete-confirmation">
      <strong><%=confirm||'Really delete?'%></strong>
      <button id="modal-confirm-delete" class="button-danger pull-right modal-confirm-delete">是</button>
      <button id="modal-abort-delete" class="button-neutral pull-right">否</button>
    </div>
  </div></script><script id="modalCollectionInfo.ejs" type="text/template"> <%
    var figuresData = content.figures;
    var revision    = content.revision;
%> <table id="collectionInfoTable" class="avocado-table"> <% if (figuresData.journalSize) { %> <tr id="collectionSizeBox">
              <th class="collectionInfoTh2">日志大小:</th>
              <th class="collectionInfoTh">
                <div id="show-collection-size" class="modal-text"> <%=prettyBytes(figuresData.journalSize)%> </div>
              </th>
              <th class="tooltipInfoTh">
                <div>
                  <span class="modalTooltips avocadoicon icon_avocadodb_info" title="日志或记录的最大大小 (以 MB 为单位)。必须至少1。">
                  </span>
                </div>
              </th>
            </tr> <% } %> <tr id="collectionSyncBox">
            <th class="collectionInfoTh2">等待同步:</th>
            <th class="collectionInfoTh">
                <div id="show-collection-sync" class="modal-text"> <%=figuresData.waitForSync%> </div>
            </th>
            <th class="tooltipInfoTh">
              <div>
                <span class="modalTooltips avocadoicon icon_avocadodb_info" title="从数据库的创建或更新返回之前同步到磁盘.">
                </span>
              </div>
            </th>
          </tr>

          <tr>
            <th class="collectionInfoTh2">ID:</th>
            <th class="collectionInfoTh">
              <div id="show-collection-id" class="modal-text"> <%=content.model.get("id")%> </div>
            <th>
          </tr>

          <tr id="collectionRevBox">
            <th class="collectionInfoTh2">修订:</th>
            <th class="collectionInfoTh">
              <div id="show-collection-rev" class="modal-text"> <%=revision.revision%> </div>
            </th>
            <th class="collectionInfoTh">
            </th>
          </tr>

          <tr>
            <th class="collectionInfoTh2">类型:</th>
            <th class="collectionInfoTh">
              <div class="modal-text"><%=content.model.get("type")%></div>
            </th>
            <th class="collectionInfoTh">
            </th>
          </tr>

          <tr>
            <th class="collectionInfoTh2">状态:</th>
            <th class="collectionInfoTh">
              <div class="modal-text"><%=content.model.get("status")%></div>
            </th>
            <th class="collectionInfoTh">
            </th>
          </tr> <% if (figuresData.numberOfShards) { %> <tr>
              <th class="collectionInfoTh2">切片:</th>
              <th class="collectionInfoTh">
                <div class="modal-text"><%=figuresData.numberOfShards%></div>
              </th>
              <th class="collectionInfoTh">
              </th>
            </tr> <% } %> <% if (figuresData.shardKeys) { %> <tr>
              <th class="collectionInfoTh2">切片 Keys:</th>
              <th class="collectionInfoTh">
                <div class="modal-text"><%=JSON.stringify(figuresData.shardKeys)%></div>
              </th>
              <th class="collectionInfoTh">
              </th>
            </tr> <% } %> <% if (figuresData.replicationFactor) { %> <tr>
              <th class="collectionInfoTh2">复制索引:</th>
              <th class="collectionInfoTh">
                <div class="modal-text"><%=figuresData.replicationFactor%></div>
              </th>
              <th class="collectionInfoTh">
              </th>
            </tr> <% } %> <% if (figuresData.indexBuckets) { %> <tr>
              <th class="collectionInfoTh2">索引容器:</th>
              <th class="collectionInfoTh">
                <div class="modal-text"><%=figuresData.indexBuckets%></div>
              </th>
              <th class="collectionInfoTh">
              </th>
            </tr> <% } %> <% if (!frontendConfig.isCluster) { %> <% if (figuresData.figures.compactionStatus) { %> <tr>
                <th class="collectionInfoTh2">压缩状态:</th>
                <th class="collectionInfoTh">
                  <div class="modal-text"><%=figuresData.figures.compactionStatus.message + " (" + figuresData.figures.compactionStatus.time + ")" %></div>
                </th>
                <th class="collectionInfoTh">
                </th>
              </tr> <% } %> <% } %> <% if (figuresData.figures.waitingFor) { %> <tr>
              <th class="collectionInfoTh2">等待:</th>
              <th class="collectionInfoTh">
                <div class="modal-text"><%=figuresData.figures.waitingFor%></div>
              </th>
              <th class="collectionInfoTh">
              </th>
            </tr> <% } %> </table>

      </div> <% if (figuresData.figures.alive && figuresData.figures.dead) { %> <% if (window.frontendConfig.isCluster) { %> <div class="infoBox">
              <h4>信息</h4>
              <p>以下信息不包含存储在预写日志中的数据。这可能是不准确的, 直到写前日志已完全刷新。</p>
            </div> <% } %> <table class="figures1 avocado-table">
            <tr class="figuresHeader">
              <th>类型</th>
              <th>长度</th>
              <th>大小</th>
              <th>剔除中</th>
              <th>信息</th>
            </tr>
            <tr>
              <th class="modal-text">激活</th> <% if (figuresData.walMessage) { %> <th class="modal-text"><%=figuresData.walMessage%></th> <% } else { %> <th class="modal-text"><%=numeral(figuresData.figures.alive.count).format('0,0')%></th> <% } %> <th class="modal-text"> <% if (figuresData.walMessage) { %> <%=figuresData.walMessage%> <% } else { %> <%=prettyBytes(figuresData.figures.alive.size)%> <% } %> </th>
              <th class="modal-text"> -</th>
              <th class="tooltipInfoTh">
                <span class="modalTooltips avocadoicon icon_avocadodb_info" title="Total number and size of all living documents.">
                </span>
              </th>
            </tr>
            <tr>
              <th class="modal-text">挂死</th>
              <th class="modal-text"> <% if (figuresData.walMessage) { %> <%=figuresData.walMessage%> <% } else { %> <%=numeral(figuresData.figures.dead.count).format('0,0')%> <% } %> </th>
              <th class="modal-text"> <% if (figuresData.walMessage) { %> <%=figuresData.walMessage%> <% } else { %> <%=prettyBytes(figuresData.figures.dead.size)%> <% } %> </th>
              <th class="modal-text"> <% if (figuresData.walMessage) { %> <%=figuresData.walMessage%> <% } else { %> <%=figuresData.figures.dead.deletion%> <% } %> </th>

              <th class="tooltipInfoTh">
                <div>
                  <span class="modalTooltips avocadoicon icon_avocadodb_info" title="所有挂死文件的总数和大小.">
                  </span>
              </div>
              </th>

            </tr>
            <tr><th><div> </div></th></tr>
          </table> <% } %> <% if (figuresData.figures.datafiles && figuresData.figures.journals && figuresData.figures.compactors) { %> <table class="figures2 avocado-table">
            <tr class="figuresHeader">
              <th>类型</th>
              <th>长度</th>
              <th>大小</th>
              <th></th>
              <th>信息</th>
            </tr>
            <tr>
              <th class="modal-text">数据文件</th>
              <th class="modal-text"> <% if (figuresData.walMessage) { %> <%=figuresData.walMessage%> <% } else { %> <%=numeral(figuresData.figures.datafiles.count).format('0,0')%> <% } %> </th>
              <th class="modal-text"> <% if (figuresData.walMessage) { %> <%=figuresData.walMessage%> <% } else { %> <%= prettyBytes(figuresData.figures.datafiles.fileSize) %> <% } %> </th>
              <th class="modal-text">&nbsp;</th>
              <th class="tooltipInfoTh">
                <div>
                    <span class="modalTooltips avocadoicon icon_avocadodb_info" data-toggle="tooltip" data-placement="left" title="活动数据文件的数量和总大小.">
                  </span>
                </div>
              </th>
            </tr>
            <tr>
              <th class="modal-text">日子</th>
              <th class="modal-text"> <% if (figuresData.walMessage) { %> <%=figuresData.walMessage%> <% } else { %> <%=numeral(figuresData.figures.journals.count).format('0,0')%> <% } %> </th>
              <th class="modal-text"> <% if (figuresData.walMessage) { %> <%=figuresData.walMessage%> <% } else { %> <%=prettyBytes(figuresData.figures.journals.fileSize)%> <% } %> </th>
              <th class="modal-text">&nbsp;</th>
              <th class="tooltipInfoTh">
                <span class="modalTooltips avocadoicon icon_avocadodb_info" title="日志文件的数量和总大小.">
                </span>
              </th>
            </tr>
            <tr>
              <th class="modal-text">压缩</th>
              <th class="modal-text"> <% if (figuresData.walMessage) { %> <%=figuresData.walMessage%> <% } else { %> <%=numeral(figuresData.figures.compactors.count).format('0,0')%> <% } %> </th>
              <th class="modal-text"> <% if (figuresData.walMessage) { %> <%=figuresData.walMessage%> <% } else { %> <%=prettyBytes(figuresData.figures.compactors.fileSize)%> <% } %> </th>
              <th class="modal-text">&nbsp;</th>
              <th class="tooltipInfoTh">
                <span class="modalTooltips avocadoicon icon_avocadodb_info" title="压实文件的数量和总大小."></span>
              </th>
            </tr>
            <tr>
              <th class="modal-text">索引</th>
              <th class="modal-text"> <%=numeral(figuresData.figures.indexes.count).format('0,0')%> </th>
              <th class="modal-text"> <%=prettyBytes(figuresData.figures.indexes.size)%> </th>
              <th class="modal-text">&nbsp;</th>
              <th class="tooltipInfoTh">
                <span class="modalTooltips avocadoicon icon_avocadodb_info" title="索引的数量和总内存使用情况。"></span>
              </th>
            </tr>
          </table> <% } %> <% if (figuresData.figures.documentReferences && figuresData.figures.uncollectedLogfileEntries) { %> <table class="figures3 avocado-table">
            <tr class="figuresHeader">
              <th>类型</th>
              <th>长度</th>
              <th></th>
              <th></th>
              <th>信息</th>
            </tr>
            <tr>
              <th class="modal-text">Uncollected</th>
              <th class="modal-text"><%=figuresData.figures.uncollectedLogfileEntries%></th>
              <th class="modal-text">&nbsp;</th>
              <th class="modal-text">&nbsp;</th>
              <th class="tooltipInfoTh">
                <span class="modalTooltips avocadoicon icon_avocadodb_info" title="Total number of uncollected WAL entries">
                </span>
              </th>
            </tr>
            <tr>
              <th class="modal-text">References</th>
              <th class="modal-text"><%=figuresData.figures.documentReferences%></th>
              <th class="modal-text">&nbsp;</th>
              <th class="modal-text">&nbsp;</th>
              <th class="tooltipInfoTh">
                <span class="modalTooltips avocadoicon icon_avocadodb_info" title="Total number of objects pointing to documents in collection datafiles">
                </span>
              </th>
            </tr>
          </table> <% } %> </script><script id="modalDownloadFoxx.ejs" type="text/template"><div>
    Your new Foxx Service is ready for download.
    You can edit it on your local system and repack it in a zip file to publish it on AvocadoDB.
  </div></script><script id="modalGraph.ejs" type="text/template"><div class="detail-chart">
		<div id="lineChartDetail" class="modal-inner-detail"></div>
		<div class="modal-dashboard-legend">
			<div class="dashboard-legend-inner" id="detailLegend"></div>
		</div>
	</div></script><script id="modalGraphTable.ejs" type="text/template"><ul id="graphTab" class="nav nav-tabs">
    <li class="active"><a href="#createGraph" data-toggle="tab" id="tab-createGraph">图形数据库</a></li>
    <li><a href="#smartGraph" data-toggle="tab" id="tab-smartGraph">Smart Graph</a></li>
    <li><a href="#exampleGraphs" data-toggle="tab" id="tab-exampleGraphs">Examples</a></li>
  </ul>

  <div class="tab-content" id="tab-content-create-graph">

    <div class="tab-pane" id="exampleGraphs">
      <table style="margin-bottom: 10px">
        <tbody>
          <tr>
            <td>Knows Graph</td>
            <td>
              <button style="float: right; margin-bottom: 10px;" graph-id="knows_graph" class="button-success createExampleGraphs">Create</button>
            </td>
          </tr>
          <tr>
            <td>Social Graph</td>
            <td>
              <button style="float: right; margin-bottom: 10px;" graph-id="social" class="button-success createExampleGraphs">Create</button>
            </td>
          </tr>
          <tr>
            <td>Routeplanner Graph</td>
            <td>
              <button style="float: right; margin-bottom: 10px;" graph-id="routeplanner" class="button-success createExampleGraphs">Create</button>
            </td>
          </tr>
        </tbody>
      </table>
     <p style="width: 100%; text-align: center;">Need help? Visit our <a style="font-weight: bold" href="https://docs.avocadodb.com/latest/Manual/Graphs/index.html#example-graphs" target="_blank">Graph Documentation</a></p>

    </div>

    <div class="active tab-pane" id="createGraph">

    <div id="smartGraphInfo" class="infoMessage" style="display: none;">
      <span>Smart Graph Info: Only use non-existent collection names (vertices/edges).</span>
    </div> <%
    var createTR = function(row, disableSubmitOnEnter) {
      var mandatory = '';
      if (row.mandatory) {
        mandatory = '*';
      }

      %> <tr class="tableRow" id="<%='row_' + row.id%>">
          <th class="collectionTh"><%=row.label%><%=mandatory%>:</th>
          <th class="collectionTh"> <%
              switch(row.type) {
                case "text":
            %> <input type="text" id="<%=row.id%>" value="<%=row.value||''%>" placeholder="<%=row.placeholder||''%>"></input> <%
                break;
              case "password":
            %> <input type="password" id="<%=row.id%>" value="<%=row.value||''%>" placeholder="<%=row.placeholder||''%>"></input> <%
                break;
              case "readonly":
            %> <input type="text" id="<%=row.id%>" value="<%=row.value||''%>" placeholder="<%=row.placeholder||''%>" disabled></input> <%
                break;
                case "checkbox":
                  var checked = '',
                    disabled = '';
                  if (row.checked) {
                    checked = 'checked';
                  }
                  if (row.disabled) {
                    disabled = 'disabled';
                  }
            %> <input type="checkbox" id="<%=row.id%>" value="<%=row.value%>" <%=checked%> <%=disabled%>></input> <%
                break;
                case "select":
            %> <select id="<%=row.id%>" class="modalSelect"> <%
                  _.each(row.options, function(opt) {
            %> <option value="<%=opt.value%>" <%=row.selected === opt.value?"selected":""%>><%=opt.label%></option> <%
                  });
            %> </select> <%
                break;
                case "select2":
            %> <input type="hidden" id="<%=row.id%>" value="<%=row.value||''%>" placeholder="<%=row.placeholder||''%>"></input> <% if (row.addAdd) {%> <button id="<%='addAfter_' + row.id%>" class="graphViewer-icon-button gv-icon-small add addAfter"></button> <% } %> <% if (row.addDelete) {%> <button id="<%='remove_' + row.id%>" class="graphViewer-icon-button gv_internal_remove_line gv-icon-small delete addDelete"></button> <% } %> <%
                break;
              }

              if (row.info) {
            %> <th>
            <span class="modalTooltips avocadoicon icon_avocadodb_info" title="<%=row.info%>">
            </span>
          </th> <%
          }
        %> </tr> <%
    }//createTR
    %> <table>
      <tbody> <%
        _.each(content, function(row) {
          createTR(row);
        });
        %> </tbody>
    </table> <%
      if (advancedContent) {
      %> <div class="accordion" id="accordion2">
        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
              <span><%=advancedContent.header%></span><span><b class="caret"></b></span>
            </a>
          </div>
          <div id="collapseOne" class="accordion-body collapse out">
            <div class="accordion-inner">
              <table>
                <tbody> <%
                  _.each(advancedContent.content, function(row) {
                    createTR(row);
                  });
                  %> </tbody>
              </table>
            </div>
          </div>
        </div>
      </div> <%
      }
      %> </div>

  </div></script><script id="modalHotkeys.ejs" type="text/template"><ul class="hotkeysList"> <% _.each(content, function(categories) { %> <li class="hotkeysLabel"><%=categories.name%></li> <% _.each(categories.content, function(values) { %> <li class="hotkeysContent"><div class="hotkeysContentLabel"><%=values.label%></div><div class="hotkeysicons">&nbsp;&nbsp;<%=values.letter%>&nbsp;&nbsp;</div></li> <% }); %> <% }); %> <ul></script><script id="modalTable.ejs" type="text/template"> <%
  var createTR = function(row) {
    var mandatory = '';
    if (row.mandatory) {
      mandatory = '*';
    }
    %> <tr class="tableRow" id="<%='row_' + row.id%>">
      <th class="collectionTh"><%=row.label%><%=mandatory%>:</th>
      <th class="collectionTh"<%=row.info?'':' colspan="2"'%>> <%
        switch(row.type) {
        case "text":
          %> <input type="text" id="<%=row.id%>" value="<%=row.value||''%>" placeholder="<%=row.placeholder||''%>"></input> <%
          break;
        case "blob":
          %> <textarea id="<%=row.id%>" placeholder="<%=row.placeholder||''%>"><%=row.value||''%></textarea> <%
          break;
        case "password":
          %> <input type="password" id="<%=row.id%>" value="<%=row.value||''%>" placeholder="<%=row.placeholder||''%>"></input> <%
          break;
        case "readonly":
          %> <div class="modal-text" id="<%=row.id%>"><%=row.value||''%></div> <%
          break;
        case "checkbox":
          var checked = '',
            disabled = '';
          if (row.checked) {
            checked = 'checked';
          }
          if (row.disabled) {
            disabled = 'disabled';
          }
          %> <input type="checkbox" id="<%=row.id%>" value="<%=row.value%>" <%=checked%> <%=disabled%>></input> <%
          break;
        case "select":
          %> <select id="<%=row.id%>" class="modalSelect"> <% _.each(row.options, function(opt) { %> <option value="<%=opt.value%>" <%=row.selected === opt.value?"selected":""%>><%=opt.label%></option> <% }); %> </select> <%
          break;
        case "select2":
          %> <input type="hidden" id="<%=row.id%>" value="<%=row.value||''%>" placeholder="<%=row.placeholder||''%>"></input> <% if (row.addDelete) {%> <button class="graphViewer-icon-button gv-icon-small add"></button> <% } %> <% if (row.addDelete) {%> <button class="graphViewer-icon-button gv_internal_remove_line gv-icon-small delete"></button> <% } %> <%
          break;
        }
        %> <% if (row.info) { %> </th>
        <th>
          <span class="modalTooltips avocadoicon icon_avocadodb_info" title="<%=row.info%>">
          </span> <% } %> </th>
    </tr> <%
  };
  %> <% if (content) { %> <table>
      <tbody> <%
        _.each(content, function(row) {
          createTR(row);
        });
        %> </tbody>
    </table> <% } %> <% if (info) { %> <%= info %> <% } %> <% if (advancedContent) { %> <div class="accordion" id="accordion2">
      <div class="accordion-group">
        <div class="accordion-heading">
          <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
            <span><%=advancedContent.header%></span><span><b class="caret"></b></span>
          </a>
        </div>
        <div id="collapseOne" class="accordion-body collapse out">
          <div class="accordion-inner">
            <table>
              <tbody> <%
                _.each(advancedContent.content, function(row) {
                  createTR(row);
                });
                %> </tbody>
            </table>
          </div>
        </div>
      </div>
    </div> <% } %> </script><script id="modalTestResults.ejs" type="text/template"> <%
  function createSuite(suite) {
    %> <dt class="tests-result-spec-suite-title"> <%= suite.title %> </dt>
    <dd> <% if (suite.tests.length) { %> <ul class="tests-result-spec-tests"> <% _.each(suite.tests, createTest) %> </ul> <% } %> <% if (suite.suites.length) { %> <dl class="tests-result-spec-suites"> <% _.each(suite.suites, createSuite) %> </dl> <% } %> </dd> <%
  }
  function createTest(test) {
    var slow = test.duration > 75;
    %> <li class="tests-result-spec-test <%= test.result %><%= slow ? ' slow': '' %>">
      <span class="tests-result-spec-test-title"> <% switch (test.result) {
          case 'pass': %> <span class="fa fa-check"></span> <% break;
          case 'fail': %> <span class="fa fa-times"></span> <% break;
          case 'pending': %> <span class="fa fa-circle"></span> <% } %> <%= test.title %> <%= slow ? '(' + test.duration + 'ms)' : '' %> </span> <% if (!_.isEmpty(test.err)) { %> <pre class="stack"><%= test.err.stack %></pre> <% } %> </li> <%
  } %> <div class="tests-result"> <% if (info.stack) { %> <div class="tests-result-stats fail">
        Test runner failed with an error.
      </div>
      <pre class="stack"><%= info.stack %></pre> <% } else { %> <div class="tests-result-stats">
        Completed <b><%= info.stats.tests %></b> tests in <b><%= info.stats.duration %>ms</b>
        (<span class="pass" title="passes"><%= info.stats.passes
        %></span>/<span class="fail" title="failures"><%= info.stats.failures
        %></span>/<span class="pending" title="pending"><%= info.stats.pending
        %></span>)
      </div>
      <div class="tests-result-spec"> <% if (info.tests.length) { %> <ul class="tests-result-spec-tests"> <% _.each(info.tests, createTest) %> </ul> <% } %> <% if (info.suites.length) { %> <dl class="tests-result-spec-suites"> <% _.each(info.suites, createSuite) %> </dl> <% } %> <% if (!info.tests.length && !info.suites.length) { %> <div class="tests-result-spec-empty">No tests found.</div> <% } %> </div> <% } %> </div></script><script id="navigationView.ejs" type="text/template"><ul class="navlist avocado-collection-ul" id="avocadoCollectionUl"> <% if (isCluster) { %> <li class="cluster-menu"><a id="cluster" class="tab" href="#cluster"><i class="fa fa-circle-o"></i>Cluster</a></li>
      <li class="nodes-menu"><a id="nodes" class="tab" href="#nodes"><i class="fa fa-server"></i>Nodes</a></li> <% } else { %> <li class="dashboard-menu"><a id="dashboard" class="tab" href="#dashboard"><i class="fa fa-dashboard"></i>状态监控</a></li> <% } %> <li class="navbar-spacer big"></li>
    <!-- <li id="dbSelect" class="dropdown databases-menu disabled"></li> -->
    <li class="collections-menu"><a id="collections" class="tab" href="#collections"><i class="fa fa-folder"></i>数据表</a></li>
    <li class="queries-menu"><a id="queries" class="tab" href="#queries"><i class="fa fa-bolt"></i>查询</a></li>
    <li class="graphs-menu"><a id="graphs" class="tab" href="#graphs"><i class="fa fa-area-chart"></i>图形数据库</a></li>
    <li class="services-menu">
      <a id="services" class="tab" href="#services"><i class="fa fa-cogs"></i>服务</a>
    </li> <% if (currentDB.get('isSystem')) { %> <li class="users-menu"><a id="users" class="tab" href="#manage"><i class="fa fa-users"></i>用户</a></li> <% } %> <!-- <% if (currentDB.get('isSystem')) { %> <li class="navbar-spacer big"></li>
      <li class="settings-menu"><a id="settings" class="tab" href="#settings"><i class="fa fa-cog"></i>Settings</a></li> <% } %> --> <% if (currentDB.get('isSystem') || currentDB.get(!isCluster)) { %> <li class="navbar-spacer big"></li> <% } %> <% if (currentDB.get('isSystem')) { %> <li class="databases-menu"><a id="databases" class="tab" href="#databases"><i class="fa fa-database"></i>数据库</a></li> <% } %> <% if (!isCluster) { %> <li class="logs-menu"><a id="logs" class="tab" href="#logs"><i class="fa fa-file-text"></i>日志</a></li> <% } %> <li class="navbar-spacer big"></li>
    <li class="support-menu"><a id="support" class="tab" href="#support"><i class="fa fa-support"></i>文档</a></li>
    <li class="helpus-menu"><a id="helpus" class="tab" href="#helpus"><i class="fa fa-heart"></i>帮助</a></li>
    <li>  <a href="http://freeidea.win">我的博客</a></li>
    <!--
    <li class="navbar-spacer big"></li>
    <li class="dropdown tools-menu" id="toolsDropdown">
      <a href="#" class="tab" id="tools">Tools <b class="caret"></b></a>
      <ul class="link-dropdown-menu" id="tools_dropdown">
        <li class="dropdown-header">Tools</li>
        <li class="dropdown-item">
          <a id="shell" class="tab" href="#shell">JS Shell</a>
        </li> <% if (!isCluster) { %> <li class="dropdown-item">
            <a id="logs" class="tab" href="#logs">Logs</a>
          </li> <% } %> <li class="dropdown-item">
          <a id="userManagement" class="tab" href="#userManagement">User Management</a>
        </li>
        <li class="dropdown-item">
          <a id="queryManagement" class="tab" href="#queryManagement">Query Management</a>
        </li>
        <li class="dropdown-item">
          <a id="workMonitor" class="tab" href="#workMonitor">Work Monitor</a>
        </li>
      </ul>
    </li>
    <li class="dropdown" id="linkDropdown">
      <a href="#" class="tab" id="links">Links <b class="caret"></b></a>
      <ul class="link-dropdown-menu" id="link_dropdown">
        <li class="dropdown-header">Documentation</li>
        <li class="dropdown-item"><a href="/_db/<%= currentDB.get('name') %>/_admin/aardvark/api/index.html" target="_blank">API Documentation</a></li>
        <li class="dropdown-item"><a href="http://docs.avocadodb.com/Avocadosh/"
                                     target="_blank">JS Shell Documentation</a></li>
        <li class="dropdown-item"><a href="http://docs.avocadodb.com/Aql/" target="_blank">AQL
          Documentation</a></li>
        <li class="dropdown-item"><a href="http://docs.avocadodb.com/" target="_blank">General
          Documentation</a></li>
        <li class="divider"></li>
        <li class="dropdown-header">AvocadoDB</li>
        <li class="dropdown-item"><a href="https://github.com/avocadodb/avocadodb" target="_blank">GitHub
          Repository</a></li>
        <li class="dropdown-item"><a href="https://www.avocadodb.com" target="_blank">AvocadoDB.com</a></li>
      </ul>
    </li>
  -->
  </ul></script><script id="nodeInfoView.ejs" type="text/template"><div class="nodeInfoView">
  <div class="modal-body">
    <table id="serverInfoTable" class="avocado-table">
      <tbody> <% _.each(entries, function (entry, name) { %> <tr>
            <th class="collectionInfoTh2"><%=name%></th>
            <th class="collectionInfoTh">
              <div id="server-<%=name%>" class="modal-text"><%=entry%></div>
            </th>
            <th> <% if (entry.description) { %> <th class="tooltipInfoTh">
                  <span class="tippy" title="<%=entry.description%>"></span>
                </th> <% } %> </th>
          </tr> <% }); %> </tbody>
    </table>
  </div>
</div></script><script id="nodesView.ejs" type="text/template"><div id="nodesContent" class="innerContent"> <% if (Object.keys(coords).length > 0) { %> <% var disabled = ''; %> <div class="pure-g">

    <div class="pure-u-1-1 pure-u-md-1-1 pure-u-lg-1-1 pure-u-xl-1-2">

    <div class="sectionHeader pure-g">
      <div class="pure-u-1-5">
        <div class="title">
          调度
        </div>
      </div>


      <div class="pure-u-4-5"> <% if (scaling === true) { %> <div class="scaleGroup" id="scaleCoords">
            <div style="text-align: -webkit-right;">
            <span class="left" id="removeCoord"><i class="fa fa-minus"></i></span>
            <input id="plannedCoords" type="text" value="<%= plannedCoords %>"/>
            <span class="right" id="addCoord"><i class="fa fa-plus"></i></span>
            </div>
          </div> <% } %> <div class="information" id="infoCoords">
          <span class="positive"><span> <%= scaleProperties.coordsOk %> </span><i class="fa fa-check-circle"></i></span> <% if (scaleProperties.coordsError) { %> <span class="negative"><span> <%= scaleProperties.coordsError %> </span><i class="fa fa-exclamation-circle"></i></span> <% } %> <% if (scaleProperties.coordsPending && scaling === true) { %> <span class="warning"><span> <%= scaleProperties.coordsPending %> </span><i class="fa fa-circle-o-notch fa-spin"></i></span>
            <button class="abortClusterPlan button-navbar button-default">中止</button> <% } %> </div>
      </div>

    </div>

    <div class="pure-g cluster-nodes-title pure-table pure-table-header pure-title" style="clear: both">
      <div class="pure-table-row">
        <div class="pure-u-10-24 left">名字</div>
        <div class="pure-u-10-24 left">终点</div>
        <div class="pure-u-3-24 mid hide-small">来自</div>
        <div class="pure-u-1-24 mid"></div>
      </div>
    </div>

    <div class="pure-g cluster-nodes coords-nodes pure-table pure-table-body"> <% _.each(coords, function(node, name) { %> <% var id = name + "-node"; %> <div class="pure-table-row <%= disabled %>" node="<%= id %>">

          <div class="pure-u-10-24 left"> <%= node.ShortName %> <i class="fa fa-bar-chart"></i> <% if(node.CanBeDeleted) { %> <i class="fa fa-trash-o"></i> <% } %> </div>
          <div class="pure-u-10-24 left"><%= node.Endpoint %></div> <% var formatted = (node.LastHeartbeatAcked).substr(11, 18).slice(0, -1); %> <div class="pure-u-3-24 hide-small mid"><%= formatted %></div> <% if(node.Status === 'GOOD') { %> <div class="pure-u-1-24 mid state"><i class="fa fa-check-circle tippy" title="<%= node.LastHeartbeatStatus %>"></i></div> <% } else { %> <div class="pure-u-1-24 mid state"><i class="fa fa-exclamation-circle"></i></div> <% } %> </div> <% }); %> </div>
  </div> <% } %> <% if (Object.keys(dbs).length > 0) { %> <% var disabled = ''; %> <% disabled = " dbserver"; %> <div class="pure-u-1-1 pure-u-md-1-1 pure-u-lg-1-1 pure-u-xl-1-2">
      <div class="sectionHeader pure-g">
        <div class="pure-u-1-5">
          <div class="title">
            DB Servers
          </div>
        </div>

        <div class="pure-u-4-5"> <% if (scaling === true) { %> <div class="scaleGroup" id="scaleCoords">
              <div style="text-align: -webkit-right;">
              <span class="left" id="removeDBs"><i class="fa fa-minus"></i></span>
              <input id="plannedDBs" value="<%= plannedDBs %>" type="text"/>
              <span class="right" id="addDBs"><i class="fa fa-plus"></i></span>
              </div>
            </div> <% } %> <div class="information" id="infoDBs">
            <span class="positive"><span> <%= scaleProperties.dbsOk %> </span><i class="fa fa-check-circle"></i></span> <% if (scaleProperties.dbsError) { %> <span class="negative"><span> <%= scaleProperties.dbsError %> </span><i class="fa fa-exclamation-circle"></i></span> <% } %> <% if (scaleProperties.dbsPending && scaling === true) { %> <span class="warning"><span> <%= scaleProperties.dbsPending %> </span><i class="fa fa-circle-o-notch fa-spin"></i></span>
              <button class="abortClusterPlan button-navbar button-default">Abort</button> <% } %> </div>

        </div>

      </div>

    <div class="pure-g cluster-nodes-title pure-table pure-table-header pure-title">
      <div class="pure-table-row">
        <div class="pure-u-10-24 left">Name</div>
        <div class="pure-u-10-24 left">Endpoint</div>
        <div class="pure-u-3-24 mid hide-small">Since</div>
        <div class="pure-u-1-24 mid"></div>
      </div>
    </div> <% } %> <div class="pure-g cluster-nodes dbs-nodes pure-table pure-table-body"> <% _.each(dbs, function(node, name) { %> <% var id = name + "-node"; %> <div class="pure-table-row <%= disabled %>" node="<%= id %>">

          <div class="pure-u-10-24 left"> <%= node.ShortName %> <% if(node.CanBeDeleted) { %> <i class="fa fa-trash-o"></i> <% } %> </div>
          <div class="pure-u-10-24 left"><%= node.Endpoint %></div> <% var formatted = (node.LastHeartbeatAcked).substr(11, 18).slice(0, -1); %> <div class="pure-u-3-24 mid hide-small"><%= formatted %></div> <% if(node.Status === 'GOOD') { %> <div class="pure-u-1-24 mid state"><i class="fa fa-check-circle tippy" title="<%= node.LastHeartbeatStatus %>"></i></div> <% } else { %> <div class="pure-u-1-24 mid state"><i class="fa fa-exclamation-circle"></i></div> <% } %> </div> <% }); %> </div>
  </div>

  </div>
  </div></script><script id="nodeView.ejs" type="text/template"><div id="nodeContent" class="innerContent">


  </div></script><script id="notificationItem.ejs" type="text/template"> <% notifications.forEach(function(n) { %> <li class="dropdown-item">
    <div class="notificationItem"> <% if (n.get("info")) { %> <i title="<%=n.get("info")%>" class="notificationInfoIcon fa fa-info-circle"></i> <% } %> <i id="<%=n.cid%>" class="fa fa-times-circle-o"></i>
      <a class="notificationItemTitle"><%=n.get("title")%></a>
      <div class="notificationItemContent"><%=n.get("content")%></div>

    </div>
  </li> <%  }); %> </script><script id="notificationView.ejs" type="text/template"><ul class="navlist" id="notificationViewUl">

  <div class="navlogo">
    <div id="stat_hd" class="notificationButton"><p id="stat_hd_counter">0</p></div>
  </div>

  <li class="dropdown no-left-margin" style="border: 0">
    <ul class="user-dropdown-menu fixedDropdown" id="notification_menu">
      <li class="dropdown-header"><a>通知</a></li>
      <ul class="innerDropdownInnerUL"></ul>
      <button id="removeAllNotifications" class="button-close">清楚</button>
    </ul>
  </li>

</ul></script><script id="progressBase.ejs" type="text/template"><div class="progress-view">
    <div class="progress-content">
      <div class="progress-text"></div>
      <div class="pong-spinner"><i /></div>
    </div>
    <div class="progress-message">
      <div class="progress-action"></div>
    </div>
  </div></script><script id="queryManagementViewActive.ejs" type="text/template"><div id="queryManagementContent" class="innerContent">
  </div></script><script id="queryManagementViewSlow.ejs" type="text/template"><div id="queryManagementContent" class="innerContent">
  </div>

  <div class="queryManagementBottomActions">
    <button id="deleteSlowQueryHistory" class="button-danger query-button">删除历史</button>
  </div></script><script id="queryView.ejs" type="text/template"><div id="queryContent" class="queryContent">

    <div class="avocadoToolbar avocadoToolbarTop">
      <div class="pull-left">
        <button id="toggleQueries1" class="button-primary"><i class="fa fa-star-o"></i>查询</button>
        <button id="toggleQueries2" class="button-primary" style="display: none"><i class="fa fa-star"></i>查询</button>
        <button id="createNewQuery" class="button-warning">新建</button>
        <button id="updateCurrentQuery" class="button-success" style="display: none"><i class="fa fa-save"></i>保存</button>
        <button id="saveCurrentQuery" class="button-success"><i class="fa fa-save"></i>另存为</button>
      </div>

      <div class="pull-right">
        <span id="querySpotlight" class="action"><i class="fa fa-magic"></i></span>
        <div class="styled-select">
          <select id="querySize" class="query-size"/>
        </div>
      </div>
    </div>

    <div class="inputEditorWrapper">
      <div class="aqlEditorWrapper" class="avocadoEditor">
        <span id="clearQuery" class="aceAction"><i class="fa fa-times-circle"></i></span>
        <div id="aqlEditor"></div>
        <div id="queryTable" style="display: none"></div>
      </div>

      <div class="bindParamEditorWrapper" class="avocadoEditor">
        <span id="switchTypes" class="aceAction type">JSON</span>
        <div id="bindParamEditor"></div>
        <div id="bindParamAceEditor" style="display: none"></div>

        <div id="previewWrapper" class="previewWrapper" style="display: none">
          <div id="previewBar" class="previewBar">
            <span>显示</span>
          </div>
          <div id="queryPreview"></div>
        </div>

      </div>
    </div>

    <div class="avocadoToolbar avocadoToolbarBottom">
      <div class="pull-right">
        <button id="exportQuery" class="button-success query-button" style="display:none">导出查询</button>
        <button id="importQuery" class="button-success query-button" style="display:none">导入查询</button>
        <button id="executeQuery" class="button-success query-button">执行</button>
        <button id="explainQuery" class="button-info query-button">结果</button>
        <button id="removeResults" class="button-close query-button" style="display: none">删除全部</button>
      </div>
    </div>

  </div>

  <div id="outputEditors" class="outputEditors">
  </div>

  <div id="queryImportDialog" class="modal hide fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" style="display: none;">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <a class="avocadoHeader">导入自定义查询</a>
    </div>

    <div class="modal-body">
      <table>
        <tbody>
          <tr class="tableRow">
            <th class="collectionTh">格式化:</th>
            <th class="collectionTh" colspan="2">
<pre><code>JSON documents embedded into a list:

[{
  "name": "Query Name",
  "value": "Query Definition",
  "parameter": "Query Bind Parameter as Object"
}]</code></code>
            </th>
          </tr>
          <tr class="tableRow">
            <th class="collectionTh">文件:</th>
            <th class="collectionTh" colspan="2">
              <input id="importQueries" name="importQueries" type="file" style="border: 0" />
            </th>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="modal-footer">
      <button id="confirmQueryImport" class="button-success disabled" style="float:right">导入</button>
      <button id="closeQueryModal" class="button-close">返回</button>
    </div></script><script id="queryViewOutput.ejs" type="text/template"><div id="outputEditorWrapper<%= counter %>" class="outputEditorWrapper">
    <div class="avocadoToolbar avocadoToolbarTop">
      <div class="pull-left">
        <span class="toolbarType"><%=type%></span>
          <span id="spinner"><i class="fa fa-spinner fa-spin"></i><i>查询中 ...</i></span>
      </div>
      <div class="pull-right">
        <span class="action closeResult" element="outputEditor<%= counter %>"><i class="fa fa-close" style="display: none"></i></span>
      </div>
      <div class="pull-right">
        <div class="switchAce" counter="<%=counter%>">
          <span id="json-switch" val="JSON" counter="<%=counter%>">JSON</span>
          <span id="table-switch" val="Table" counter="<%=counter%>" style="display: none">Table</span>
          <span id="graph-switch" val="Graph" counter="<%=counter%>" style="display: none">Graph</span>
        </div>
      </div>
    </div>
    <div id="outputEditor<%= counter %>" style="opacity: 0.5"></div>
    <div id="sentWrapper<%= counter %>" class="sentWrapper" style="display: none">
      <div class="pull-left">
        <div id="sentQueryEditor<%= counter %>"></div>
      </div>
      <div class="pull-right">
        <div id="sentBindParamEditor<%= counter %>"></div>
      </div>
    </div>
    <div class="avocadoToolbar avocadoToolbarBottom">
      <div class="pull-right"> <% if (type === 'Query') { %> <button id="copy2gV" counter="<%=counter%>" style="display: none; margin-right: 0;" class="button-success">图形查询视图</button>
          <button id="downloadQueryResult" counter="<%=counter%>" style="display: none; margin-right: 0;" class="button-success">下载</button>
          <button id="downloadCsvResult" counter="<%=counter%>" style="display: none; margin-right: 0;" class="button-success">导出CSV</button>
          <button id="copy2aqlEditor" counter="<%=counter%>" style="display: none; margin-right: 8px;" class="button-success">复制到编辑器</button>
          <button id="cancelCurrentQuery" class="button-danger" style="margin-right: 5px">返回</button> <% } %> </div>
    </div>
  </div>

  </div></script><script id="scaleView.ejs" type="text/template"><div id="scaleContent" class="innerContent"> <% var genClass = "pure-u-1-5";%> <div class="pure-g cluster-nodes-title pure-table pure-table-header pure-title">
      <div class="pure-table-row">
        <div class="<%= genClass %> left">类型</div>
        <div class="<%= genClass %> mid">运行中</div>
        <div class="<%= genClass %> mid">Planned</div>
        <div class="<%= genClass %> mid">状态</div>
        <div class="<%= genClass %> right"></div>
      </div>
    </div>

    <div class="pure-g cluster-nodes pure-table pure-table-body">

        <div class="pure-table-row noHover">
          <div class="<%= genClass %> left">Coordinators</div>
          <div class="<%= genClass %> mid" id="runningCoords"><%= runningCoords %></div> <% if (initialized === true) { %> <div class="<%= genClass %> mid" id="plannedCoords"></div>
            <div class="<%= genClass %> mid" id="statusCoords"></div> <% } else { %> <div class="<%= genClass %> mid" id="plannedCoords"><i class="fa fa-circle-o-notch fa-spin"></i></div>
            <div class="<%= genClass %> mid" id="statusCoords"><i class="fa fa-circle-o-notch fa-spin"></i></div> <% } %> <div class="<%= genClass %> actions right">
            <i class="fa fa-minus-circle" aria-hidden="true" id="removeCoord"></i>
            <i class="fa fa-plus-circle" aria-hidden="true" id="addCoord"></i>
          </div>
        </div>

        <div class="pure-table-row noHover">
          <div class="<%= genClass %> left">DBServers</div>
          <div class="<%= genClass %> mid" id="runningDBs"><%= runningDBs %></div> <% if (initialized === true) { %> <div class="<%= genClass %> mid" id="plannedDBs"></div>
            <div class="<%= genClass %> mid" id="statusDBs"></div> <% } else { %> <div class="<%= genClass %> mid" id="plannedDBs"><i class="fa fa-circle-o-notch fa-spin"></i></div>
            <div class="<%= genClass %> mid" id="statusDBs"><i class="fa fa-circle-o-notch fa-spin"></i></div> <% } %> <div class="<%= genClass %> actions right">
            <i class="fa fa-minus-circle" aria-hidden="true" id="removeDBs"></i>
            <i class="fa fa-plus-circle" aria-hidden="true" id="addDBs"></i>
          </div>
        </div>

    </div>

  </div></script><script id="shardsView.ejs" type="text/template"><div id="shardsContent" class="innerContent"> <% var genClass1 = 'pure-u-6-24'; %> <% var genClass2 = 'pure-u-6-24'; %> <% var disabled = ' '; %> <% var collectionName; %> <% var first = 0; %> <% _.each(collections, function(collection, name) { %> <% if (name.substring(0,1) !== '_') { %> <% collectionName = name%> <% if (first === 0) { %> <div class="sectionHeader pure-g" style="margin-top: -20px;"> <% first++; %> <% } else { %> <div class="sectionHeader pure-g"> <% } %> <div class="pure-u-1-1">
              <div class="title" style="position: relative; top: -4px;"> <%= name %> </div>
            </div>
          </div>

          <div class="pure-g pure-table pure-table-header pure-title" style="clear: both">
            <div class="pure-table-row">
              <div class="<%= genClass1 %> left">Shard</div>
              <div class="<%= genClass1 %> left">Leader</div>
              <div class="<%= genClass2 %> left">Followers</div>
              <div class="<%= genClass1 %> left">Sync</div>
            </div>
          </div> <% var counter = 0; var shardClass; %> <% _.each(collection.Plan, function(shard, name) { %> <div class="pure-g pure-table pure-table-body"> <% if (shard.progress) { %> <%   shardClass = 'disabled';%> <% } %> <div class="pure-table-row noHover <%= shardClass %>" collection="<%= collectionName %>" shard="<%= name %>" leader="<%= shard.leader%>"> <% if (shard.leader.substring(0,1) === '_') { %> <%   shard.leader = shard.leader.slice(1) %> <% } %> <div class="<%= genClass1 %> left"><%= name %></div>
                <div class="shardLeader <%= genClass1 %> positive left"><span><%= shard.leader %></span></div> <% var found = null;  %> <% _.each(shard.followers, function(db) {  %> <% if (db === shard.leader) { %> <% found = true; %> <% } %> <% }); %> <% if (found) { %> <div class="<%= genClass2 %> mid"><i class="fa fa-circle-o-notch fa-spin"></i></div> <% } else { %> <% if (shard.followers.length === 0) { %> <div class="<%= genClass2 %> left"> no followers </div> <% } else { %> <% var string = ''; %> <% var counter2 = 0; %> <% _.each(shard.followers, function(db) {  %> <% if (shard.followers.length === 1) { %> <% string += '<span>' + db + '</span> '; %> <% } else { %> <% if (counter2 === 0) { %> <% string += '<span>' + db + '</span>'; counter2++; %> <% } else { %> <% string += ", " + '<span>' + db + '</span>'; %> <% } %> <% } %> <% });  %> <div class="shardFollowers <%= genClass2 %> left"><%= string %></div> <% } %> <% if (shard.progress) { %> <% var percent; %> <% if (shard.progress.total === 0) { %> <% percent = numeral(0).format('0.00%'); %> <% } else { %> <% percent = numeral(shard.progress.current / shard.progress.total).format('0.00%'); %> <% } %> <div class="<%= genClass1 %> left"><%= percent %></div> <% } else { %> <div class="<%= genClass1 %> left"><i style="margin-left: 10px;" class="fa fa-check-circle"></i></div> <% } %> <% } %> </div>
            </div> <% counter++; %> <% }); %> <% } %> <% }); %> <button id="rebalanceShards" style="margin-top: 20px;" class="button-success pull-right">Rebalance Shards</button>
  </div></script><script id="shellView.ejs" type="text/template"><div class="headerBar">
    <a class="avocadoHeader">JS Shell</a>
  </div>
  <div id="shell_workspace_header"/>
  <div id="shell_workspace" class="shell_workspace">
    <div id="replShell" class="replShell"/>
  </div></script><script id="spotlightView.ejs" type="text/template"><div class="spotlightWrapper">
    <div id="spotlight">
      <input class="typeahead" type="text" placeholder="搜索... ">
    </div>
  </div></script><script id="statisticBarView.ejs" type="text/template"><div class="navlogo display-none">
    <a href="#dashboard" style="padding-left: 15px;">
      <img class="svg stat_cpu"
        src="img/cpu.svg"
      />
      <img class="svg stat_ram"
        src="img/ram.svg"
        style="background-color: #FAFF92; margin-top: 9px; margin-left: 4px; margin-right: 2px;"
      />
      <img class="svg stat_req"
        src="img/requests.svg"
        style="background-color: #8aa051; margin-top: 9px;"
      />
    </a>
  </div></script><script id="subNavigationView.ejs" type="text/template"><ul class="subMenuEntries top">
    <li class="subMenuEntry pull-left">
      <div class="breadcrumb"></div>
    </li>
    <li id="healthStatus" class="infoEntry subMenuEntry pull-right positive">
      <a class="info health-info">健康状态: </a>
      <a class="state health-state">好！</a>
      <a class="icon health-icon">
        <i class="fa fa-check-circle"></i>
      </a>
    </li>
    <li id="dbStatus" class="infoEntry subMenuEntry pull-right positive">
      <a class="info">DB:</a>
      <a class="state"><span><%= currentDB.name %></span></a>
      <a class="icon db-icon default-icon">
        <i class="fa fa-refresh"></i>
      </a>
    </li>
    <li id="userBar" class="infoEntry subMenuEntry pull-right" style="margin-right: 10px;">
    </li>
  </ul>

  <ul class="subMenuEntries bottom">
  </ul></script><script id="supportView.ejs" type="text/template"><div class="supportView">
    <ul class="subMenuEntries subViewNavbar">
      <li id="documentation-support" class="subMenuEntry active"><a>文档</a></li>
      <li id="community-support" class="subMenuEntry"><a>社区</a></li>
      <li id="swagger-support" class="subMenuEntry "><a>Rest API</a></li>
    </ul>

    <div class="innerContent" id="supportContent">

      <div id="community" style="display: none">
        <div class="pure-g" style="width: 100%;">

        社区也没搭建呢

        </div>

      </div>

      <div id="swagger" style="display: none; height: 100%;">
      </div>

      <div id="documentation">

        <div class="pure-g" style="width: 100%;">
          <style>
            .ssaa{
              display: block;
              width: 100%;
              height: 80vh;
            }
          </style>
          <iframe class="ssaa" src="http://freeidea.win/wen/nosql/arngodb-aql.html"></iframe>

        </div>
      </div>
     </div>

   </div></script><script id="tableView.ejs" type="text/template"> <%
var escaped = function (value) {
  return value.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
  .replace(/"/g, "&quot;").replace(/'/g, "&#39;");
};
var cutByResolution = function (str) {
  if (str.length > 256) {
    return escaped(str.substr(0, 256)) + '...';
  }
  return escaped(str);
};
%> <div class="pure-g pure-table pure-table-header pure-title no-padding">
  <div class="pure-table-row">
    <div class="pure-u-19-24">
      <div class="title">内容</div>
    </div>
    <div class="pure-u-3-24">
      <div class="">_key</div>
    </div>
    <div class="pure-u-2-24">
      <div class="actions">
        <a id="addDocumentButton" class="pull-right addButton"><span title="新建一个数据库"><i class="fa fa-plus-circle"></i></span></a>
      </div>
    </div>
  </div>
</div>

<div class="pure-g pure-table pure-table-body no-padding"> <% if (docs.length === 0) { %> <div class="pure-table-row pure-u-1-1">
      <span class="dataTables_empty">没有数据</span>
    </div> <%
  }
  var odd = true;
  docs.forEach(function(d) {
    var tempObj = {};
    $.each(d.attributes.content, function(k, v) {
      if (! (k === '_id' || k === '_rev' || k === '_key')) {
        tempObj[k] = v;
      }
    });
    var tmpObj = JSON.stringify(tempObj); %> <div class="pure-table-row <%=odd?'odd':'even'%>" id="row_<%=d.attributes.key %>">

    <div class="pure-u-19-24">
      <div class="padding-right">
        <pre class="prettify" title="<%=escaped(tmpObj)%>"><%= cutByResolution(tmpObj) %></pre>
      </div>
    </div>
    <div class="pure-u-3-24">
      <div class="key"><%= d.attributes.key %></div>
    </div>
    <div class="pure-u-2-24">
      <div class="actions">
        <a class="deleteButton">
        <span data-original-title="Delete document" title="删除数据库"><i class="fa fa-minus-circle"></i></i></span></a>
      </div>
    </div>

  </div> <%
    odd = !odd;
    });
  %> </div></script><script id="userBarView.ejs" type="text/template"><a class="info default-icon">User:
    <span class="toggle"> <%=_.escape(username)%> </span>
    <i id="userLogoutIcon" class="fa fa-power-off" aria-hidden="true"></i>
  </a>

  <ul id="userInfo" class="subBarDropdown">
    <li class="dropdown-header">
      <div style="height: 1px; background: rgb(119, 203, 153)"></div>
      <img class="user-img" src="<%=img%>"/>
        <p><% if (name) {%><%=_.escape(username)%><small> <%=_.escape(name)%> </small> <% } else {%> <%=_.escape(username)%> <% } %> </p>
    </li>
    <li class="dropdown-footer">
      <button id="userLogout" class="button-primary btn-small pull-right">退出登录</button>
    </li>
  </ul>

<!--
<ul class="navlist" id="userBarUl">

  <li class="dropdown user-menu userImg">
    <a href="#" class="tab userImg" id="user" >
      <img class="user-menu-img" src="<%=img%>" id="userimage" /> <b class="caret"></b>
    </a>
    <ul class="user-dropdown-menu" id="user_dropdown">
      <li class="dropdown-header" style="text-transform: none"> <%
        if (name) {%> <%=_.escape(name)%> (<%=_.escape(username)%>) <% } else {%> <%=_.escape(username)%> <% } %> <li class="dropdown-item">
        <a id="userProfile" class="tab" href="#user">User Profile</a>
      </li>
      <li class="dropdown-item">
        <a id="userLogout" class="tab">Logout</a>
      </li>
    </ul>
  </li>

</ul>

--></script><script id="userManagementView.ejs" type="text/template"><div class="headerBar">
    <div class="search-field">
      <input type="text" value="<%=searchString%>" id="userManagementSearchInput" class="search-input" placeholder="搜索..."/>
      <!-- <img id="userManagementSearchSubmit" class="search-submit-icon"> -->
      <i id="userManagementSearchSubmit" class="fa fa-search"></i>
    </div>
    <div class="headerButtonBar">
      <ul class="headerButtonList">
        <li class="enabled">
        <a id="userManagementToggle" class="headerButton">
          <span class="icon_avocadodb_settings2" title="设置"></span>
        </a>
        </li>
      </ul>
    </div>
  </div>


<div id="userManagementDropdown2" class="headerDropdown">

  <div id="userManagementDropdown" class="dropdownInner">
    <ul>
      <li class="nav-header">排序</li>

      <!--<li><a href="#">
        <label class="checkbox checkboxLabel">
          <input class="css-checkbox" type="checkbox" id="sortName">
          <label class="css-label css-label-round"></label>Sort by username
        </label>
      </a></li>

      <li><a href="#">
        <label class="checkbox checkboxLabel">
          <input class="css-checkbox" type="checkbox" id="sortType">
          <label class="css-label css-label-round"></label>Sort by status
        </label>
      </a></li>-->

      <li><a href="#">
        <label class="checkbox checkboxLabel">
          <input class="css-checkbox" type="checkbox" id="userSortDesc">
          <i class="fa"></i>
          降序排序
        </label>
      </a></li>
    </ul>
  </div>

</div>


  <div class="contentDiv" id="avocadoCollectionsContainer">
    <div id="userManagementThumbnailsIn" class="tileList pure-u">
      <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">
        <div class="fullBorderBox">
          <a id="createUser" class="add">
            <span id="newUser" class="pull-left add-Icon"><i class="fa fa-plus-circle"></i></span>
            新建用户
          </a>
        </div>
      </div> <% collection.forEach(function(user) {
              var username = user.get("user"),
                extra = user.get("extra"),
                name = extra.name,
                img = extra.img,
                active = user.get("active"),
                avatar = '<img src="';

              if (! img) {
                avatar += 'img/default_user.png';
              } else {
                avatar += 'https://s.gravatar.com/avatar/';
                avatar += img;
                avatar += '?s=50';
              }
              avatar += '" height="50" width="50" alt="" class="icon" id="';
              avatar += _.escape(username);
              avatar += '" />';
              if (! name) {
                name = " ";
              }
      %> <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">
        <div class="paddingBox">
          <div class="borderBox"></div>
          <div class="iconSet">
            <!-- <span class="icon_avocadodb_settings2 editUser" id="<%=_.escape(username) %>_edit-user" alt="Edit user" title="Edit user"></span> -->
          </div> <%=avatar %> <div class="tileBadge">
            <span> <%if (active) {%> <div class="corneredBadge loaded">
                激活
              </div> <%} else {%> <div class="corneredBadge unloaded">
                挂起
              </div> <%}%> </span>
          </div>

          <h5 class="collectionName"><%=_.escape(username) %> <% if (name !== ' ') { %>(<%=_.escape(name) %>)<%}%></h5>
        </div>
      </div> <%});%> </div>
  </div></script><script id="userPermissionView.ejs" type="text/template"> <% var genClass = "pure-u-1-5"; %> <% var genClass2 = "pure-u-1-5"; %> <div id="userPermissionView" class="innerContent">
    <div class="pure-g pure-table pure-table-header pure-title" style="clear: both">
      <div class="pure-table-row">
        <div class="<%= genClass %> left">数据库</div>
        <div class="<%= genClass %> mid">管理 <i class="fa fa-info-circle tippy" title="允许创建/删除集合并在数据库中设置用户权限。"></i></div>
        <div class="<%= genClass %> mid">访问 <i class="fa fa-info-circle tippy" title="允许访问数据库。用户不能创建或删除集合。"></i></div>
        <div class="<%= genClass %> mid">禁止访问 <i class="fa fa-info-circle tippy" title="用户无法访问数据库。"></i></div>
        <div class="<%= genClass %> mid">设置默认 <i class="fa fa-info-circle tippy" title="未指定访问级别。将使用数据库默认值 (*)."></i></div>
      </div>
    </div>

    <div class="pure-g pure-table pure-table-body"> <% _.each(permissions, function(content, db) { %> <% var extraClass = ''; %> <% if (db.charAt(0) === '*') { %> <% extraClass = 'noAction'; %> <% } %> <div class="pure-table-row db-row noHover <%= extraClass %>" id="<%= db %>-db">
          <div class="<%= genClass2 %> left db-label"> <% if (db.charAt(0) !== '*') { %> <i class="fa fa-caret-right" style="width: 10px;"></i>
              <i class="fa fa-caret-down" style="display: none; width: 10px;"></i> <% } %> <% if (db.charAt(0) === '*') { %> <b style="margin-right: 5px;">*</b> <i class="fa fa-info-circle tippy" title="如果未指定身份验证级别, 则为数据库的默认访问级别。"></i> <% } else { %> <%= db %> <% } %> </div> <% var permissionsDB = content.permission; %> <% if (permissionsDB === 'rw') { %> <div class="<%= genClass2 %> mid">
              <input class="dbCheckbox readWrite" type="radio" name="<%= db %>" permission="rw" checked>
            </div>
            <div class="<%= genClass2 %> mid">
              <input class="dbCheckbox readOnly" type="radio" name="<%= db %>" permission="ro">
            </div>
            <div class="<%= genClass2 %> mid">
              <input class="dbCheckbox noAccess" type="radio" name="<%= db %>" permission="none">
            </div> <% if (db.charAt(0) !== '*') { %> <div class="<%= genClass2 %> mid">
                <input class="dbCheckbox useDefault" type="radio" name="<%= db %>" permission="undefined">
              </div> <% } else { %> <div class="<%= genClass2 %> mid"></div> <% } %> <% } else if (permissionsDB === 'ro') { %> <div class="<%= genClass2 %> mid">
              <input class="dbCheckbox readWrite" type="radio" name="<%= db %>" permission="<%= db %>">
            </div>
            <div class="<%= genClass2 %> mid">
              <input class="dbCheckbox readOnly" type="radio" name="<%= db %>" permission="<%= db %>" checked>
            </div>
            <div class="<%= genClass2 %> mid">
              <input class="dbCheckbox noAccess" type="radio" name="<%= db %>" permission="none">
            </div> <% if (db.charAt(0) !== '*') { %> <div class="<%= genClass2 %> mid">
                <input class="dbCheckbox useDefault" type="radio" name="<%= db %>" permission="undefined">
              </div> <% } else { %> <div class="<%= genClass2 %> mid"></div> <% } %> <% } else if (permissionsDB === 'none') { %> <div class="<%= genClass2 %> mid">
              <input class="dbCheckbox readWrite" type="radio" name="<%= db %>" permission="<%= db %>">
            </div>
            <div class="<%= genClass2 %> mid">
              <input class="dbCheckbox readOnly" type="radio" name="<%= db %>" permission="<%= db %>">
            </div>
            <div class="<%= genClass2 %> mid">
              <input class="dbCheckbox noAccess" type="radio" name="<%= db %>" permission="none" checked>
            </div> <% if (db.charAt(0) !== '*') { %> <div class="<%= genClass2 %> mid">
                <input class="dbCheckbox useDefault" type="radio" name="<%= db %>" permission="undefined">
              </div> <% } else { %> <div class="<%= genClass2 %> mid"></div> <% } %> <% } else { %> <div class="<%= genClass2 %> mid">
              <input class="dbCheckbox readWrite" type="radio" name="<%= db %>" permission="<%= db %>">
            </div>
            <div class="<%= genClass2 %> mid">
              <input class="dbCheckbox readOnly" type="radio" name="<%= db %>" permission="<%= db %>">
            </div>
            <div class="<%= genClass2 %> mid">
              <input class="dbCheckbox noAccess" type="radio" name="<%= db %>" permission="none">
            </div> <% if (db.charAt(0) !== '*') { %> <div class="<%= genClass2 %> mid">
                <input class="dbCheckbox useDefault" type="radio" name="<%= db %>" permission="undefined" checked>
              </div> <% } else { %> <div class="<%= genClass2 %> mid"></div> <% } %> <% } %> <div class="collection-row pure-table-row noHover inner <%= extraClass %>" style="display: none">
            <div class="<%= genClass %> left inner collection-label collection-label-first"><span class="collLabel">数据表<span></div>
            <div class="<%= genClass %> mid inner collection-label">读/写</div>
            <div class="<%= genClass %> mid inner collection-label">只读</div>
            <div class="<%= genClass %> mid inner collection-label collection-label-last">禁止访问</div>
            <div class="<%= genClass %> mid inner collection-label collection-label-last">设置默认</div> <% _.each(content.collections, function(permissionCollection, collectionName) { %> <% if (db.charAt(0) !== '*') { %> <% if (collectionName.charAt(0) !== '_') { %> <% if (collectionName !== '*') { %> <div class="pure-table-row noHover" id="<%=collectionName%>-collection"> <% } else { %> <div class="pure-table-row noHover" id="___-collection"> <% } %> <% if (collectionName === '*') { %> <div class="<%= genClass %> left inner"><span class="collName"><b style="margin-right: 7px"> <%= collectionName %></b></span><i class="fa fa-info-circle tippy" title="<%=db%> 中的集合的默认访问级别 (如果未指定身份验证级别)。"></i></div> <% } else { %> <div class="<%= genClass %> left inner"><span class="collName"><%= collectionName %></span></div> <% } %> <% if (permissionCollection === 'rw') { %> <div class="<%= genClass %> mid inner">
                        <input class="collCheckbox readWrite" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>" checked>
                      </div>
                      <div class="<%= genClass %> mid inner">
                        <input class="collCheckbox readOnly" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>">
                      </div>
                      <div class="<%= genClass %> mid inner">
                        <input class="collCheckbox noAccess" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>">
                      </div> <% if (collectionName.charAt(0) !== '*') { %> <div class="<%= genClass %> mid inner">
                          <input class="collCheckbox useDefault" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>">
                        </div> <% } else { %> <div class="<%= genClass %> mid inner"></div> <% } %> <% } else if (permissionCollection === 'ro') { %> <div class="<%= genClass %> mid inner">
                        <input class="collCheckbox readWrite" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>">
                      </div>
                      <div class="<%= genClass %> mid inner">
                        <input class="collCheckbox readOnly" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>" checked>
                      </div>
                      <div class="<%= genClass %> mid inner">
                        <input class="collCheckbox noAccess" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>">
                      </div> <% if (collectionName.charAt(0) !== '*') { %> <div class="<%= genClass %> mid inner">
                          <input class="collCheckbox useDefault" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>">
                        </div> <% } else { %> <div class="<%= genClass %> mid inner"></div> <% } %> <% } else if (permissionCollection === 'none') { %> <div class="<%= genClass %> mid inner">
                        <input class="collCheckbox readWrite" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>">
                      </div>
                      <div class="<%= genClass %> mid inner">
                        <input class="collCheckbox readOnly" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>">
                      </div>
                      <div class="<%= genClass %> mid inner">
                        <input class="collCheckbox noAccess" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>" checked>
                      </div> <% if (collectionName.charAt(0) !== '*') { %> <div class="<%= genClass %> mid inner">
                          <input class="collCheckbox useDefault" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>">
                        </div> <% } else { %> <div class="<%= genClass %> mid inner"></div> <% } %> <% } else { %> <div class="<%= genClass %> mid inner">
                        <input class="collCheckbox readWrite" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>">
                      </div>
                      <div class="<%= genClass %> mid inner">
                        <input class="collCheckbox readOnly" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>">
                      </div>
                      <div class="<%= genClass %> mid inner">
                        <input class="collCheckbox noAccess" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>">
                      </div> <% if (collectionName.charAt(0) !== '*') { %> <div class="<%= genClass %> mid inner">
                          <input class="collCheckbox useDefault" type="radio" db="<%= db %>" name="<%=db%>-<%=collectionName%>" collection="<%= collectionName %>" permission="<%= collectionName %>" checked>
                        </div> <% } else { %> <div class="<%= genClass %> mid inner"></div> <% } %> <% } %> </div> <% } %> <% } %> <% }); %> </div>

        </div> <% }); %> </div>

  </div></script><script id="warningList.ejs" type="text/template"> <% if (warnings.length > 0) { %> <div>
      <ul> <% console.log(warnings); _.each(warnings, function(w) { console.log(w);%> <li><b><%=w.code%></b>: <%=w.message%></li> <% }); %> </ul>
    </div> <% } %> </script><script id="workMonitorView.ejs" type="text/template"><div class="headerBar">
    <a class="avocadoHeader">Work Monitor</a>
  </div>

  <div id="workMonitorContent" class="innerContent">
  </div></script></head><body><nav class="navbar" style="display: none"><div class="primary"><div class="navlogo"><h2>AvocadoDB</h2></div><div class="statmenu" id="statisticBar"></div><div class="navmenu" id="navigationBar"></div></div></nav><div id="modalPlaceholder"></div><div class="bodyWrapper" style="display: none"><div class="centralRow"><div id="navbar2" class="navbarWrapper secondary"><div class="subnavmenu" id="subNavigationBar"></div></div><div class="resizecontainer contentWrapper"><div id="loadingScreen" class="loadingScreen" style="display: none"><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw margin-bottom"></i> <span class="sr-only">Loading...</span></div><div id="content" class="centralContent"></div><footer class="footer"><div id="footerBar"></div></footer></div></div></div><div id="progressPlaceholder" style="display:none"></div><div id="spotlightPlaceholder" style="display:none"></div><div id="graphSettingsContent" style="display: none"></div><div id="filterSelectDiv" style="display:none"></div><div id="offlinePlaceholder" style="display:none"><div class="offline-div"><div class="pure-u"><div class="pure-u-1-4"></div><div class="pure-u-1-2 offline-window"><div class="offline-header"><h3>You have been disconnected from the server</h3></div><div class="offline-body"><p>The connection to the server has been lost. The server may be under heavy load.</p><p>Trying to reconnect in <span id="offlineSeconds">10</span> seconds.</p><p class="animation_state"><span><button class="button-success">Reconnect now</button></span></p></div></div><div class="pure-u-1-4"></div></div></div></div><div class="avocadoFrame" style=""><div class="outerDiv"><div class="innerDiv"></div></div></div><script src="libs.js?version=1504531585246"></script><script src="app.js?version=1504531585246"></script></body></html>
